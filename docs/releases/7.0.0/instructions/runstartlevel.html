<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/css/style.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>-runstartlevel ( order begin step )* | bnd</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="-runstartlevel ( order begin step )*" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="After a resolve the resolver calculates a number of resources that are mapped to bundles. This mapping can include ordering and assigned startlevels. The basic instruction that parameterizes this is -runstartlevel." />
<meta property="og:description" content="After a resolve the resolver calculates a number of resources that are mapped to bundles. This mapping can include ordering and assigned startlevels. The basic instruction that parameterizes this is -runstartlevel." />
<meta property="og:site_name" content="bnd" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="-runstartlevel ( order begin step )*" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"After a resolve the resolver calculates a number of resources that are mapped to bundles. This mapping can include ordering and assigned startlevels. The basic instruction that parameterizes this is -runstartlevel.","headline":"-runstartlevel ( order begin step )*","url":"/instructions/runstartlevel.html"}</script>
<!-- End Jekyll SEO tag -->


	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

</head>


<body>

	
<ul class="container12 menu-bar" style="display:flex;align-items:center">
	<li span=8><a class=menu-link href="/"><img
			class=menu-logo src="/img/bnd-80x40-white.png"></a>
			<a href="/chapters/110-introduction.html">Intro
			</a><a href="/chapters/800-headers.html">Headers
			</a><a href="/chapters/825-instructions-ref.html">Instructions
			</a><a href="/chapters/855-macros-ref.html">Macros
			</a><a href="/chapters/400-commands.html">Commands
			</a><div class="releases">
			         <button class="dropbtn"><span class="fa fa-bars"></span> master</button>
			         <div class="dropdown-content"></div>
			   </div>
    <li span=4>     
        <div class="search-container">
			<form method="get" id="search" action="https://google.com/search" target="_blank">
			    <input type="hidden" name="as_q" value="site:bndtools.org OR site:bnd.discourse.group"/>
			    <input type="text" name="q" placeholder="Search…" aria-label="Search https://google.com for bnd specific"/>
			    <button type="submit" class="fa fa-search"></button>
            </form>
       </div>
</ul>
<div class=menu-link span=0><script>
    window.onload = function() {
      var currentURL = window.location.href;
      var regex = /https:\/\/bnd.bndtools.org\/(.*\.html)/;
      var matches = currentURL.match(regex);
      var filePath = matches[1];
	  if (filePath.includes("/")) 
		  filePath = "_" + filePath;
      var markdownFileURL = 'https://github.com/bndtools/bnd/blob/master/docs/' + filePath.replace(".html", ".md");
      var repoLink = document.getElementById('repo-link');
      repoLink.href = markdownFileURL;		
    };
</script>

<a id="repo-link" href="https://github.com/bndtools/bnd/docs/" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</div>



					

	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">
	
		
			<li><a href="/chapters/110-introduction.html">Introduction</a>
	  	
  	
		
			<li><a href="/chapters/120-install.html">How to install bnd</a>
	  	
  	
		
			<li><a href="/chapters/123-tour-workspace.html">Guided Tour</a>
	  	
  	
		
			<li><a href="/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>
	  	
  	
		
			<li><a href="/chapters/130-concepts.html">Concepts</a>
	  	
  	
		
			<li><a href="/chapters/140-best-practices.html">Best practices</a>
	  	
  	
		
			<li><a href="/chapters/150-build.html">Build</a>
	  	
  	
		
			<li><a href="/chapters/155-project-setup.html">Project Setup</a>
	  	
  	
		
			<li><a href="/chapters/160-jars.html">Generating JARs</a>
	  	
  	
		
			<li><a href="/chapters/170-versioning.html">Versioning</a>
	  	
  	
		
			<li><a href="/chapters/180-baselining.html">Baselining</a>
	  	
  	
		
			<li><a href="/chapters/200-components.html">Service Components</a>
	  	
  	
		
			<li><a href="/chapters/210-metatype.html">Metatype</a>
	  	
  	
		
			<li><a href="/chapters/220-contracts.html">Contracts</a>
	  	
  	
		
			<li><a href="/chapters/230-manifest-annotations.html">Bundle Annotations</a>
	  	
  	
		
			<li><a href="/chapters/235-accessor-properties.html">Accessor Properties</a>
	  	
  	
		
			<li><a href="/chapters/240-spi-annotations.html">SPI Annotations</a>
	  	
  	
		
			<li><a href="/chapters/250-resolving.html">Resolving Dependencies</a>
	  	
  	
		
			<li><a href="/chapters/300-launching.html">Launching</a>
	  	
  	
		
			<li><a href="/chapters/305-startlevels.html">Startlevels</a>
	  	
  	
		
			<li><a href="/chapters/310-testing.html">Testing</a>
	  	
  	
		
			<li><a href="/chapters/315-launchpad-testing.html">Testing with Launchpad</a>
	  	
  	
		
			<li><a href="/chapters/320-packaging.html">Packaging Applications</a>
	  	
  	
		
			<li><a href="/chapters/330-jpms.html">JPMS Libraries</a>
	  	
  	
		
			<li><a href="/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>
	  	
  	
		
			<li><a href="/chapters/395-generating-documentation.html">Generating Documentation</a>
	  	
  	
		
			<li><a href="/chapters/400-commands.html">Commands</a>
	  	
  	
		
			<li><a href="/chapters/600-developer.html">For Developers</a>
	  	
  	
		
			<li><a href="/chapters/650-windows.html">Tips for Windows users</a>
	  	
  	
		
			<li><a href="/chapters/700-tools.html">Tools bound to bnd</a>
	  	
  	
		
			<li><a href="/chapters/790-reference.html">Reference</a>
	  	
  	
		
			<li><a href="/chapters/800-headers.html">Headers</a>
	  	
  	
		
			<li><a href="/chapters/820-instructions.html">Instruction Reference</a>
	  	
  	
		
			<li><a href="/chapters/825-instructions-ref.html">Instruction Index</a>
	  	
  	
		
			<li><a href="/chapters/850-macros.html">Macro Reference</a>
	  	
  	
		
			<li><a href="/chapters/855-macros-ref.html">Macro Index</a>
	  	
  	
		
			<li><a href="/chapters/870-plugins.html">Plugins</a>
	  	
  	
		
			<li><a href="/chapters/875-external-plugins.html">External Plugins</a>
	  	
  	
		
			<li><a href="/chapters/880-settings.html">Settings</a>
	  	
  	
		
			<li><a href="/chapters/900-errors.html">Errors</a>
	  	
  	
		
			<li><a href="/chapters/910-warnings.html">Warnings</a>
	  	
  	
		
			<li><a href="/chapters/920-faq.html">Frequently Asked Questions</a>
	  	
  	
</ul>

			</div>
			
		<li span=9>
			<div class=notes-margin>
			
				<h1> -runstartlevel ( order | begin | step )*               
                 <div class="pageclass" onclick="window.location.href='/chapters/790-reference.html';">
                     Project
                   </div>
                     
				</h1>
				<p>After a <a href="/chapters/250-resolving.html">resolve</a> the resolver calculates a number of resources that are mapped to bundles. This mapping can
include ordering and assigned startlevels. The basic instruction that parameterizes this is <code class="language-plaintext highlighter-rouge">-runstartlevel</code>.</p>

<h2 id="default-behavior-when-not-set">Default behavior when not set</h2>

<p>If <code class="language-plaintext highlighter-rouge">-runstartlevel</code> is not set the set of -runbundles will be sorted by name and version after which it is merged with the existing
<code class="language-plaintext highlighter-rouge">-runbundles</code>. Setting the <code class="language-plaintext highlighter-rouge">-runstartlevel</code> makes it possible to let bnd assign startlevels based on different
ordering strategies.</p>

<h2 id="syntax">Syntax</h2>

<p>This instruction has the following syntax:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-runstartlevel      ::= runstartlevel ( ',' runstartlevel )
runstartlevel       ::  order | begin | step
order               ::= 'order=' ORDER
ORDER               ::= 
        'leastdependenciesfirst' 
    |   'leastdependencieslast'
    |   'random'
    |   'sortbynameversion'
    |   'mergesortbynameversion'
begin               ::= 'begin=' NUMBER
step                ::= 'step=' NUMBER
</code></pre></div></div>

<p>The final <code class="language-plaintext highlighter-rouge">-runstartlevel</code> flattens the properties so that the last of each of <code class="language-plaintext highlighter-rouge">order</code>, <code class="language-plaintext highlighter-rouge">begin</code>, or <code class="language-plaintext highlighter-rouge">step</code> will be used.</p>

<h3 id="order-types">Order Types</h3>

<p>The value of <code class="language-plaintext highlighter-rouge">order</code> can take on the following values:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mergesortbynameversion</code> – Ordering by name (and version) and then merging was the original behavior. This is therefore the default.</li>
  <li><code class="language-plaintext highlighter-rouge">sortbynameversion</code> – For completeness, this option orders the bundles by name and version and then assigns a startlevel.</li>
  <li><code class="language-plaintext highlighter-rouge">random</code> – Use a random ordering. The ordering uses an algorithm that is based on the random number generator and should therefore 
be different on each run.</li>
  <li><code class="language-plaintext highlighter-rouge">leastdependenciesfirst</code> – Sort the resources <em>topologically</em> and place the resources with the least dependencies first.</li>
  <li><code class="language-plaintext highlighter-rouge">leastdependencieslast</code> – Sort the resources <em>topologically</em> and place the resources with the least dependencies last.</li>
</ul>

<p>The topological sorting algorithm is based on <a href="https://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm">Tarjan</a>. It can handle cyclic dependencies well. However, cyclic dependencies
make the ordering not perfect.</p>

<h2 id="startlevels">Startlevels</h2>

<p>After the resources have been resolved they are sorted according to the <code class="language-plaintext highlighter-rouge">order</code>. If the <code class="language-plaintext highlighter-rouge">begin</code> attribute is set and
higher than 0, the resources will be assigned a startlevel that starts at the given value. By default, the step for each
bundle is 10. (A lesson taught to us by BASIC) The step can be overridden by setting the <code class="language-plaintext highlighter-rouge">step</code> value.</p>

<p>If the <code class="language-plaintext highlighter-rouge">begin</code> value is not set, or it is set to a value &lt; 1, then no startlevel attribute is added. However, the
order of the <code class="language-plaintext highlighter-rouge">-runbundles</code> will be in the specified <code class="language-plaintext highlighter-rouge">order</code>. In most cases, this is then some kind of <em>natural</em> ordering
since launchers start these</p>

<p>If you set the <code class="language-plaintext highlighter-rouge">step</code> to 0 then all bundles will be assigned the same startlevel. However, the <code class="language-plaintext highlighter-rouge">-runbundles</code> has the proper 
order.</p>

<h2 id="example">Example</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-runstartlevel: \
    order = leastdependenciesfirst, \
    begin = 1000, \
    step  =    1
</code></pre></div></div>

<p>After resolving, this can generate:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-runbundles: \
	org.apache.felix.configadmin;version='[1.8.8,1.8.9)';startlevel=1000,\
	org.apache.felix.http.jetty;version='[3.2.0,3.2.1);startlevel=1001',\
	org.apache.felix.http.servlet-api;version='[1.1.2,1.1.3);startlevel=1002',\
	...
	osgi.enroute.twitter.bootstrap.webresource;version='[3.3.5,3.3.6);startlevel=1019',\
	osgi.enroute.web.simple.provider;version='[2.1.0,2.1.1);startlevel=1020'
</code></pre></div></div>


			</div>
	</ul>

	
<nav class=next-prev>
	<a href='/instructions/runrequires.html'></a> <a href='/instructions/runstorage.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/">GitHub</a>
			</ul>
	</ul>
</footer>

</body>
</html>
