<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/7.2.0/css/style.css" rel="stylesheet" />
<link rel="stylesheet" href="/css/github.dark.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="sitemap" type="application/xml" title="bnd Sitemap" href="/sitemap.xml">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Service-Component ::= RESOURCE ( ‘,’ RESOURCE ) | bnd</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Service-Component ::= RESOURCE ( ‘,’ RESOURCE )" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Example: Service-Component=com.acme.Foo?;activate=&#39;start&#39;" />
<meta property="og:description" content="Example: Service-Component=com.acme.Foo?;activate=&#39;start&#39;" />
<meta property="og:site_name" content="bnd" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-12-27T00:11:56+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Service-Component ::= RESOURCE ( ‘,’ RESOURCE )" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-12-27T00:11:56+01:00","datePublished":"2025-12-27T00:11:56+01:00","description":"Example: Service-Component=com.acme.Foo?;activate=&#39;start&#39;","headline":"Service-Component ::= RESOURCE ( ‘,’ RESOURCE )","mainEntityOfPage":{"@type":"WebPage","@id":"/releases/7.2.0/heads/service_component.html"},"url":"/releases/7.2.0/heads/service_component.html"}</script>
<!-- End Jekyll SEO tag -->


	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

</head>


<body>
	
<ul class="container12 menu-bar" style="display:flex;align-items:center">
	<li span=8><a class=menu-link href="/releases/7.2.0/"><img
			class=menu-logo src="/releases/7.2.0/img/bnd-80x40-white.png"></a>
			<a 
				class="" 
				href="/releases/7.2.0/chapters/110-introduction.html">Intro
			</a>
			<a 
				class="selected"
				href="/releases/7.2.0/chapters/800-headers.html">Headers
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/825-instructions-ref.html">Instructions
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/855-macros-ref.html">Macros
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/400-commands.html">Commands
			</a>
			<div class="releases">
				<button class="dropbtn"><span class="fa fa-bars"></span> 7.2.0</button>
				<div class="dropdown-content"></div>
			</div>
    <li span=4>     
        <div class="search-container">
			<button type="button" class="fa fa-search" onclick="openModal()"></button>
       </div>
</ul>
<div class=menu-link span=0><a
	id="repo-link"
	href="https://github.com/bndtools/bnd/blob/master/docs/_heads/service_component.md"
	target="_blank"
>
	<img
		style="
			position: absolute;
			top: 0;
			right: 0;
			margin: 0;
			padding: 4px;
			z-index: 100;
			width: 45px;
		"
		src="/img/github-mark.svg"
		alt="Fork me on GitHub"
		title="Fork me on GitHub"
/></a>
</div>



					

	<ul class=container12>
		<li span=3>
			<div class="side-nav">
			
	
	<ul class="side-nav">
	<li><span class="side-nav-section">Getting Started</span>
		<ul class="side-nav">
		
			
				

					
					<li><a href="/releases/7.2.0/chapters/110-introduction.html">Introduction</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/120-install.html">How to install bnd</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/123-tour-workspace.html">Guided Tour Workspace & Projects</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/125-tour-features.html">bnd / bndlib Features and JAR Wrapping Techniques</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/920-faq.html">FAQ - Frequently Asked Questions</a></li>
					

				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Concepts and Practices</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/130-concepts.html">Concepts</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/135-history.html">Background</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/140-best-practices.html">Best practices</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Build and Development</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/150-build.html">Build</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/160-jars.html">Generating JARs</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/170-versioning.html">Versioning</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/180-baselining.html">Baselining</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/200-components.html">Service Components</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/210-metatype.html">Metatype</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/220-contracts.html">Contracts</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/230-manifest-annotations.html">Bundle Annotations</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/235-accessor-properties.html">Accessor Properties</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/240-spi-annotations.html">SPI Annotations</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Dependency and Launching</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/250-resolving.html">Resolving Dependencies</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/300-launching.html">Launching</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/305-startlevels.html">Startlevels</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Testing</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/310-testing.html">Testing</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/315-launchpad-testing.html">Testing with Launchpad</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Packaging and Distribution</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/320-packaging.html">Packaging Applications</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/330-jpms.html">JPMS Libraries</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Documentation and Tools</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/395-generating-documentation.html">Generating Documentation</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/400-commands.html">bnd CLI Commands</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/600-developer.html">For Developers</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/620-template-fragments.html">Templates for Workspaces</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/650-windows.html">Tips for Windows users</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/700-tools.html">Tools bound to bnd</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Reference Material</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/790-reference.html">Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/800-headers.html">Headers</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/820-instructions.html">Instruction Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/825-instructions-ref.html">Instruction Index</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/850-macros.html">Macro Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/855-macros-ref.html">Macro Index</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/870-plugins.html">Plugins</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/875-external-plugins.html">External Plugins</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Configuration and Troubleshooting</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/880-settings.html">Settings</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/900-errors.html">Errors</a></li>
					

				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/910-warnings.html">Warnings</a></li>
					

				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>




			</div>
			
		<li span=9>
			<div class=notes-margin>

<main data-pagefind-body>
				<div class="page-header">
					<h1 data-pagefind-filter="pagetype:heads"> Service-Component ::= RESOURCE ( ',' RESOURCE )</h1>
					<div class="container-right">
						<nav class="next-prev" data-pagefind-ignore>
     
    <a href='/releases/7.2.0/heads/require_capability.html' title="Require-Capability ::= requirement ( ',' requirement )*">Prev</a> 
     
    
    <a href='/releases/7.2.0/heads/src.html' title="src">Next</a>
     
</nav>
						
						
						<div class="pageclass" onclick="window.location.href='/chapters/790-reference.html';">
							Header
						</div>
						
						
					</div>
					
				</div>




XML documents containing component descriptions must be specified by the Service-Component header in the manifest.

<br /><br />

				<ul>
  <li>
    <p>Example: <code class="language-shell highlighter-rouge">Service-Component<span class="o">=</span>com.acme.Foo?<span class="p">;</span><span class="nv">activate</span><span class="o">=</span><span class="s1">'start'</span></code></p>
  </li>
  <li>
    <p>Pattern: <code class="language-shell highlighter-rouge">.<span class="k">*</span></code></p>
  </li>
</ul>

<!-- Manual content from: ext/service_component.md -->
<p><br /><br /></p>

<h1 id="service-component">Service-Component</h1>

<p>The <code class="language-shell highlighter-rouge">Service-Component</code> header lists XML files that describe Declarative Services (DS) components in the bundle. These XML documents must be present in the bundle and are used by the OSGi framework to register and manage components at runtime.</p>

<p>Example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Service-Component: OSGI-INF/components.xml
</code></pre></div></div>

<p>This header is required for bundles that use OSGi Declarative Services.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/<span class="k">**</span>
 <span class="k">*</span> Analyze the class space <span class="k">for </span>any classes that have an OSGi annotation <span class="k">for </span>DS.
 <span class="k">*</span>/
public class DSAnnotations implements AnalyzerPlugin <span class="o">{</span>

	public boolean analyzeJar<span class="o">(</span>Analyzer analyzer<span class="o">)</span> throws Exception <span class="o">{</span>
		Parameters header <span class="o">=</span> OSGiHeader.parseHeader<span class="o">(</span>analyzer.getProperty<span class="o">(</span>Constants.DSANNOTATIONS<span class="o">))</span><span class="p">;</span>
		<span class="k">if</span> <span class="o">(</span>header.size<span class="o">()</span> <span class="o">==</span> 0<span class="o">)</span>
			<span class="k">return </span><span class="nb">false</span><span class="p">;</span>

		Instructions instructions <span class="o">=</span> new Instructions<span class="o">(</span>header<span class="o">)</span><span class="p">;</span>
		Collection&lt;Clazz&gt; list <span class="o">=</span> analyzer.getClassspace<span class="o">()</span>.values<span class="o">()</span><span class="p">;</span>
		String sc <span class="o">=</span> analyzer.getProperty<span class="o">(</span>Constants.SERVICE_COMPONENT<span class="o">)</span><span class="p">;</span>
		List&lt;String&gt; names <span class="o">=</span> new ArrayList&lt;String&gt;<span class="o">()</span><span class="p">;</span>
		<span class="k">if</span> <span class="o">(</span>sc <span class="o">!=</span> null <span class="o">&amp;&amp;</span> sc.trim<span class="o">()</span>.length<span class="o">()</span> <span class="o">&gt;</span> 0<span class="o">)</span>
			names.add<span class="o">(</span>sc<span class="o">)</span><span class="p">;</span>

		<span class="k">for</span> <span class="o">(</span>Clazz c: list<span class="o">)</span> <span class="o">{</span>
			<span class="k">for</span> <span class="o">(</span>Instruction instruction : instructions.keySet<span class="o">())</span> <span class="o">{</span>

				<span class="k">if</span> <span class="o">(</span>instruction.matches<span class="o">(</span>c.getFQN<span class="o">()))</span> <span class="o">{</span>
					<span class="k">if</span> <span class="o">(</span>instruction.isNegated<span class="o">())</span>
						<span class="nb">break</span><span class="p">;</span>
					ComponentDef definition <span class="o">=</span> AnnotationReader.getDefinition<span class="o">(</span>c, analyzer<span class="o">)</span><span class="p">;</span>
					<span class="k">if</span> <span class="o">(</span>definition <span class="o">!=</span> null<span class="o">)</span> <span class="o">{</span>
						definition.sortReferences<span class="o">()</span><span class="p">;</span>
						definition.prepare<span class="o">(</span>analyzer<span class="o">)</span><span class="p">;</span>
						String name <span class="o">=</span> <span class="s2">"OSGI-INF/"</span> + definition.name + <span class="s2">".xml"</span><span class="p">;</span>
						names.add<span class="o">(</span>name<span class="o">)</span><span class="p">;</span>
						analyzer.getJar<span class="o">()</span>.putResource<span class="o">(</span>name, new TagResource<span class="o">(</span>definition.getTag<span class="o">()))</span><span class="p">;</span>
					<span class="o">}</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
		sc <span class="o">=</span> Processor.append<span class="o">(</span>names.toArray<span class="o">(</span>new String[names.size<span class="o">()]))</span><span class="p">;</span>
		analyzer.setProperty<span class="o">(</span>Constants.SERVICE_COMPONENT, sc<span class="o">)</span><span class="p">;</span>
		<span class="k">return </span><span class="nb">false</span><span class="p">;</span>
	<span class="o">}</span>

	@Override
	public String toString<span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="s2">"DSAnnotations"</span><span class="p">;</span>
	<span class="o">}</span>
<span class="o">}</span>

			package aQute.bnd.make.component<span class="p">;</span>
		
		import java.io.<span class="k">*</span><span class="p">;</span>
		import java.util.<span class="k">*</span><span class="p">;</span>
		import java.util.Map.Entry<span class="p">;</span>
		
		import aQute.bnd.annotation.component.<span class="k">*</span><span class="p">;</span>
		import aQute.bnd.component.<span class="k">*</span><span class="p">;</span>
		import aQute.bnd.header.<span class="k">*</span><span class="p">;</span>
		import aQute.bnd.make.metatype.<span class="k">*</span><span class="p">;</span>
		import aQute.bnd.osgi.<span class="k">*</span><span class="p">;</span>
		import aQute.bnd.osgi.Clazz.QUERY<span class="p">;</span>
		import aQute.bnd.osgi.Descriptors.TypeRef<span class="p">;</span>
		import aQute.bnd.service.<span class="k">*</span><span class="p">;</span>
		import aQute.lib.tag.<span class="k">*</span><span class="p">;</span>
		
		/<span class="k">**</span>
		 <span class="k">*</span> This class is an analyzer plugin. It looks at the properties and tries to
		 <span class="k">*</span> find out <span class="k">if </span>the Service-Component header contains the bnd shortut syntax. If
		 <span class="k">*</span> not, the header is copied to the output, <span class="k">if </span>it does, an XML file is created
		 <span class="k">*</span> and added to the JAR and the header is modified appropriately.
		 <span class="k">*</span>/
		public class ServiceComponent implements AnalyzerPlugin <span class="o">{</span>
		
			public boolean analyzeJar<span class="o">(</span>Analyzer analyzer<span class="o">)</span> throws Exception <span class="o">{</span>
		
				ComponentMaker m <span class="o">=</span> new ComponentMaker<span class="o">(</span>analyzer<span class="o">)</span><span class="p">;</span>
		
				Map&lt;String,Map&lt;String,String&gt;&gt; l <span class="o">=</span> m.doServiceComponent<span class="o">()</span><span class="p">;</span>
		
				analyzer.setProperty<span class="o">(</span>Constants.SERVICE_COMPONENT, Processor.printClauses<span class="o">(</span>l<span class="o">))</span><span class="p">;</span>
		
				analyzer.getInfo<span class="o">(</span>m, Constants.SERVICE_COMPONENT + <span class="s2">": "</span><span class="o">)</span><span class="p">;</span>
				m.close<span class="o">()</span><span class="p">;</span>
		
				<span class="k">return </span><span class="nb">false</span><span class="p">;</span>
			<span class="o">}</span>
		
			private static class ComponentMaker extends Processor <span class="o">{</span>
				Analyzer	analyzer<span class="p">;</span>
		
				ComponentMaker<span class="o">(</span>Analyzer analyzer<span class="o">)</span> <span class="o">{</span>
					super<span class="o">(</span>analyzer<span class="o">)</span><span class="p">;</span>
					this.analyzer <span class="o">=</span> analyzer<span class="p">;</span>
				<span class="o">}</span>
		
				/<span class="k">**</span>
				 <span class="k">*</span> Iterate over the Service Component entries. There are two cases:
				 <span class="k">*</span> &lt;ol&gt;
				 <span class="k">*</span> &lt;li&gt;An XML file reference&lt;/li&gt;
				 <span class="k">*</span> &lt;li&gt;A FQN/wildcard with a <span class="nb">set </span>of attributes&lt;/li&gt;
				 <span class="k">*</span> &lt;/ol&gt;
				 <span class="k">*</span> An XML reference is immediately expanded, an FQN/wildcard is more
				 <span class="k">*</span> complicated and is delegated to
				 <span class="k">*</span> <span class="o">{</span>@link <span class="c">#componentEntry(Map, String, Map)}.</span>
				 <span class="k">*</span> 
				 <span class="k">*</span> @throws Exception
				 <span class="k">*</span>/
				Map&lt;String,Map&lt;String,String&gt;&gt; doServiceComponent<span class="o">()</span> throws Exception <span class="o">{</span>
					Map&lt;String,Map&lt;String,String&gt;&gt; serviceComponents <span class="o">=</span> newMap<span class="o">()</span><span class="p">;</span>
					String header <span class="o">=</span> getProperty<span class="o">(</span>SERVICE_COMPONENT<span class="o">)</span><span class="p">;</span>
					Parameters sc <span class="o">=</span> parseHeader<span class="o">(</span>header<span class="o">)</span><span class="p">;</span>
		
					<span class="k">for</span> <span class="o">(</span>Entry&lt;String,Attrs&gt; entry : sc.entrySet<span class="o">())</span> <span class="o">{</span>
						String name <span class="o">=</span> entry.getKey<span class="o">()</span><span class="p">;</span>
						Map&lt;String,String&gt; info <span class="o">=</span> entry.getValue<span class="o">()</span><span class="p">;</span>
		
						try <span class="o">{</span>
							<span class="k">if</span> <span class="o">(</span>name.indexOf<span class="o">(</span><span class="s1">'/'</span><span class="o">)</span> <span class="o">&gt;=</span> 0 <span class="o">||</span> name.endsWith<span class="o">(</span><span class="s2">".xml"</span><span class="o">))</span> <span class="o">{</span>
								// Normal service component, we <span class="k">do </span>not process it
								serviceComponents.put<span class="o">(</span>name, EMPTY<span class="o">)</span><span class="p">;</span>
							<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
								componentEntry<span class="o">(</span>serviceComponents, name, info<span class="o">)</span><span class="p">;</span>
							<span class="o">}</span>
						<span class="o">}</span>
						catch <span class="o">(</span>Exception e<span class="o">)</span> <span class="o">{</span>
							e.printStackTrace<span class="o">()</span><span class="p">;</span>
							error<span class="o">(</span><span class="s2">"Invalid "</span> + Constants.SERVICE_COMPONENT + <span class="s2">" header: %s %s, throws %s"</span>, name, info, e<span class="o">)</span><span class="p">;</span>
							throw e<span class="p">;</span>
						<span class="o">}</span>
					<span class="o">}</span>
					<span class="k">return </span>serviceComponents<span class="p">;</span>
				<span class="o">}</span>
		
				/<span class="k">**</span>
				 <span class="k">*</span> Parse an entry <span class="k">in </span>the Service-Component header. This header supports
				 <span class="k">*</span> the following types:
				 <span class="k">*</span> &lt;ol&gt;
				 <span class="k">*</span> &lt;li&gt;An FQN + attributes describing a component&lt;/li&gt;
				 <span class="k">*</span> &lt;li&gt;A wildcard expression <span class="k">for </span>finding annotated components.&lt;/li&gt;
				 <span class="k">*</span> &lt;/ol&gt;
				 <span class="k">*</span> The problem is the distinction between an FQN and a wildcard because
				 <span class="k">*</span> an FQN can also be used as a wildcard. If the info specifies
				 <span class="k">*</span> <span class="o">{</span>@link Constants#NOANNOTATIONS<span class="o">}</span> <span class="k">then </span>wildcards are an error and the
				 <span class="k">*</span> component must be fully described by the info. Otherwise the
				 <span class="k">*</span> FQN/wildcard is expanded into a list of classes with annotations. If
				 <span class="k">*</span> this list is empty, the FQN <span class="k">case</span> is interpreted as a <span class="nb">complete</span>
				 <span class="k">*</span> component definition. For the wildcard <span class="k">case</span>, it is checked <span class="k">if </span>any
				 <span class="k">*</span> matching classes <span class="k">for </span>the wildcard have been compiled <span class="k">for </span>a class file
				 <span class="k">*</span> format that does not support annotations, this can be a problem with
				 <span class="k">*</span> JSR14 <span class="nb">who </span>silently ignores annotations. An error is reported <span class="k">in </span>such
				 <span class="k">*</span> a <span class="k">case</span><span class="nb">.</span>
				 <span class="k">*</span> 
				 <span class="k">*</span> @param serviceComponents
				 <span class="k">*</span> @param name
				 <span class="k">*</span> @param info
				 <span class="k">*</span> @throws Exception
				 <span class="k">*</span> @throws IOException
				 <span class="k">*</span>/
				private void componentEntry<span class="o">(</span>Map&lt;String,Map&lt;String,String&gt;&gt; serviceComponents, String name,
						Map&lt;String,String&gt; info<span class="p">)</span> throws Exception, IOException <span class="o">{</span>
		
					boolean annotations <span class="o">=</span> <span class="o">!</span>Processor.isTrue<span class="o">(</span>info.get<span class="o">(</span>NOANNOTATIONS<span class="o">))</span><span class="p">;</span>
					boolean fqn <span class="o">=</span> Verifier.isFQN<span class="o">(</span>name<span class="o">)</span><span class="p">;</span>
		
					<span class="k">if</span> <span class="o">(</span>annotations<span class="o">)</span> <span class="o">{</span>
		
						// Annotations possible!
		
						Collection&lt;Clazz&gt; annotatedComponents <span class="o">=</span> analyzer.getClasses<span class="o">(</span><span class="s2">""</span>, QUERY.ANNOTATED.toString<span class="o">()</span>,
								Component.class.getName<span class="o">()</span>, //
								QUERY.NAMED.toString<span class="o">()</span>, name //
								<span class="o">)</span><span class="p">;</span>
		
						<span class="k">if</span> <span class="o">(</span>fqn<span class="o">)</span> <span class="o">{</span>
							<span class="k">if</span> <span class="o">(</span>annotatedComponents.isEmpty<span class="o">())</span> <span class="o">{</span>
		
								// No annotations, fully specified <span class="k">in </span>header
		
								createComponentResource<span class="o">(</span>serviceComponents, name, info<span class="o">)</span><span class="p">;</span>
							<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
		
								// We had a FQN so expect only one
		
								<span class="k">for</span> <span class="o">(</span>Clazz c : annotatedComponents<span class="o">)</span> <span class="o">{</span>
									annotated<span class="o">(</span>serviceComponents, c, info<span class="o">)</span><span class="p">;</span>
								<span class="o">}</span>
							<span class="o">}</span>
						<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
		
							// We did not have an FQN, so expect the use of wildcards
		
							<span class="k">if</span> <span class="o">(</span>annotatedComponents.isEmpty<span class="o">())</span>
								checkAnnotationsFeasible<span class="o">(</span>name<span class="o">)</span><span class="p">;</span>
							<span class="k">else
								for</span> <span class="o">(</span>Clazz c : annotatedComponents<span class="o">)</span> <span class="o">{</span>
									annotated<span class="o">(</span>serviceComponents, c, info<span class="o">)</span><span class="p">;</span>
								<span class="o">}</span>
						<span class="o">}</span>
					<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
						// No annotations
						<span class="k">if</span> <span class="o">(</span>fqn<span class="o">)</span>
							createComponentResource<span class="o">(</span>serviceComponents, name, info<span class="o">)</span><span class="p">;</span>
						<span class="k">else
							</span>error<span class="o">(</span><span class="s2">"Set to %s but entry %s is not an FQN "</span>, NOANNOTATIONS, name<span class="o">)</span><span class="p">;</span>
		
					<span class="o">}</span>
				<span class="o">}</span>
		
				/<span class="k">**</span>
				 <span class="k">*</span> Check <span class="k">if </span>annotations are actually feasible looking at the class
				 <span class="k">*</span> format. If the class format does not provide annotations <span class="k">then </span>it is
				 <span class="k">*</span> no use specifying annotated components.
				 <span class="k">*</span> 
				 <span class="k">*</span> @param name
				 <span class="k">*</span> @return
				 <span class="k">*</span> @throws Exception
				 <span class="k">*</span>/
				private Collection&lt;Clazz&gt; checkAnnotationsFeasible<span class="o">(</span>String name<span class="o">)</span> throws Exception <span class="o">{</span>
					Collection&lt;Clazz&gt; not <span class="o">=</span> analyzer.getClasses<span class="o">(</span><span class="s2">""</span>, QUERY.NAMED.toString<span class="o">()</span>, name //
							<span class="o">)</span><span class="p">;</span>
		
					<span class="k">if</span> <span class="o">(</span>not.isEmpty<span class="o">())</span> <span class="o">{</span>
						<span class="k">if</span> <span class="o">(</span><span class="s2">"*"</span>.equals<span class="o">(</span>name<span class="o">))</span>
							<span class="k">return </span>not<span class="p">;</span>
						error<span class="o">(</span><span class="s2">"Specified %s but could not find any class matching this pattern"</span>, name<span class="o">)</span><span class="p">;</span>
					<span class="o">}</span>
		
					<span class="k">for</span> <span class="o">(</span>Clazz c : not<span class="o">)</span> <span class="o">{</span>
						<span class="k">if</span> <span class="o">(</span>c.getFormat<span class="o">()</span>.hasAnnotations<span class="o">())</span>
							<span class="k">return </span>not<span class="p">;</span>
					<span class="o">}</span>
		
					warning<span class="o">(</span><span class="s2">"Wildcards are used (%s) requiring annotations to decide what is a component. Wildcard maps to classes that are compiled with java.target &lt; 1.5. Annotations were introduced in Java 1.5"</span>,
							name<span class="o">)</span><span class="p">;</span>
		
					<span class="k">return </span>not<span class="p">;</span>
				<span class="o">}</span>
		
				void annotated<span class="o">(</span>Map&lt;String,Map&lt;String,String&gt;&gt; components, Clazz c, Map&lt;String,String&gt; info<span class="o">)</span> throws Exception <span class="o">{</span>
					// Get the component definition
					// from the annotations
					Map&lt;String,String&gt; map <span class="o">=</span> ComponentAnnotationReader.getDefinition<span class="o">(</span>c, this<span class="o">)</span><span class="p">;</span>
		
					// Pick the name, the annotation can override
					// the name.
					String localname <span class="o">=</span> map.get<span class="o">(</span>COMPONENT_NAME<span class="o">)</span><span class="p">;</span>
					<span class="k">if</span> <span class="o">(</span>localname <span class="o">==</span> null<span class="o">)</span>
						localname <span class="o">=</span> c.getFQN<span class="o">()</span><span class="p">;</span>
		
					// Override the component info without manifest
					// entries. We merge the properties though.
		
					String merged <span class="o">=</span> Processor.merge<span class="o">(</span>info.remove<span class="o">(</span>COMPONENT_PROPERTIES<span class="o">)</span>, map.remove<span class="o">(</span>COMPONENT_PROPERTIES<span class="o">))</span><span class="p">;</span>
					<span class="k">if</span> <span class="o">(</span>merged <span class="o">!=</span> null <span class="o">&amp;&amp;</span> merged.length<span class="o">()</span> <span class="o">&gt;</span> 0<span class="o">)</span>
						map.put<span class="o">(</span>COMPONENT_PROPERTIES, merged<span class="o">)</span><span class="p">;</span>
					map.putAll<span class="o">(</span>info<span class="o">)</span><span class="p">;</span>
					createComponentResource<span class="o">(</span>components, localname, map<span class="o">)</span><span class="p">;</span>
				<span class="o">}</span>
		
				private void createComponentResource<span class="o">(</span>Map&lt;String,Map&lt;String,String&gt;&gt; components, String name,
						Map&lt;String,String&gt; info<span class="o">)</span> throws Exception <span class="o">{</span>
		
					// We can override the name <span class="k">in </span>the parameters
					<span class="k">if</span> <span class="o">(</span>info.containsKey<span class="o">(</span>COMPONENT_NAME<span class="o">))</span>
						name <span class="o">=</span> info.get<span class="o">(</span>COMPONENT_NAME<span class="o">)</span><span class="p">;</span>
		
					// Assume the <span class="nv">impl</span><span class="o">==</span>name, but allow override
					String impl <span class="o">=</span> name<span class="p">;</span>
					<span class="k">if</span> <span class="o">(</span>info.containsKey<span class="o">(</span>COMPONENT_IMPLEMENTATION<span class="o">))</span>
						impl <span class="o">=</span> info.get<span class="o">(</span>COMPONENT_IMPLEMENTATION<span class="o">)</span><span class="p">;</span>
		
					TypeRef implRef <span class="o">=</span> analyzer.getTypeRefFromFQN<span class="o">(</span>impl<span class="o">)</span><span class="p">;</span>
					// Check <span class="k">if </span>such a class exists
					analyzer.referTo<span class="o">(</span>implRef<span class="o">)</span><span class="p">;</span>
		
					boolean designate <span class="o">=</span> designate<span class="o">(</span>name, info.get<span class="o">(</span>COMPONENT_DESIGNATE<span class="o">)</span>, <span class="nb">false</span><span class="o">)</span>
							<span class="o">||</span> designate<span class="o">(</span>name, info.get<span class="o">(</span>COMPONENT_DESIGNATEFACTORY<span class="o">)</span>, <span class="nb">true</span><span class="o">)</span><span class="p">;</span>
		
					// If we had a designate, we want a default configuration policy of
					// require.
					<span class="k">if</span> <span class="o">(</span>designate <span class="o">&amp;&amp;</span> info.get<span class="o">(</span>COMPONENT_CONFIGURATION_POLICY<span class="o">)</span> <span class="o">==</span> null<span class="o">)</span>
						info.put<span class="o">(</span>COMPONENT_CONFIGURATION_POLICY, <span class="s2">"require"</span><span class="o">)</span><span class="p">;</span>
		
					// We have a definition, so make an XML resources
					Resource resource <span class="o">=</span> createComponentResource<span class="o">(</span>name, impl, info<span class="o">)</span><span class="p">;</span>
					analyzer.getJar<span class="o">()</span>.putResource<span class="o">(</span><span class="s2">"OSGI-INF/"</span> + name + <span class="s2">".xml"</span>, resource<span class="o">)</span><span class="p">;</span>
		
					components.put<span class="o">(</span><span class="s2">"OSGI-INF/"</span> + name + <span class="s2">".xml"</span>, EMPTY<span class="o">)</span><span class="p">;</span>
		
				<span class="o">}</span>
		
				/<span class="k">**</span>
				 <span class="k">*</span> Create a Metatype and Designate record out of the given
				 <span class="k">*</span> configurations.
				 <span class="k">*</span> 
				 <span class="k">*</span> @param name
				 <span class="k">*</span> @param config
				 <span class="k">*</span> @throws Exception 
				 <span class="k">*</span>/
				private boolean designate<span class="o">(</span>String name, String config, boolean factory<span class="o">)</span> throws Exception <span class="o">{</span>
					<span class="k">if</span> <span class="o">(</span>config <span class="o">==</span> null<span class="o">)</span>
						<span class="k">return </span><span class="nb">false</span><span class="p">;</span>
		
					<span class="k">for</span> <span class="o">(</span>String c : Processor.split<span class="o">(</span>config<span class="o">))</span> <span class="o">{</span>
						TypeRef ref <span class="o">=</span> analyzer.getTypeRefFromFQN<span class="o">(</span>c<span class="o">)</span><span class="p">;</span>
						Clazz clazz <span class="o">=</span> analyzer.findClass<span class="o">(</span>ref<span class="o">)</span><span class="p">;</span>
						<span class="k">if</span> <span class="o">(</span>clazz <span class="o">!=</span> null<span class="o">)</span> <span class="o">{</span>
							analyzer.referTo<span class="o">(</span>ref<span class="o">)</span><span class="p">;</span>
							MetaTypeReader r <span class="o">=</span> new MetaTypeReader<span class="o">(</span>clazz, analyzer<span class="o">)</span><span class="p">;</span>
							r.setDesignate<span class="o">(</span>name, factory<span class="o">)</span><span class="p">;</span>
							String rname <span class="o">=</span> <span class="s2">"OSGI-INF/metatype/"</span> + name + <span class="s2">".xml"</span><span class="p">;</span>
		
							analyzer.getJar<span class="o">()</span>.putResource<span class="o">(</span>rname, r<span class="o">)</span><span class="p">;</span>
						<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
							analyzer.error<span class="o">(</span><span class="s2">"Cannot find designated configuration class %s for component %s"</span>, c, name<span class="o">)</span><span class="p">;</span>
						<span class="o">}</span>
					<span class="o">}</span>
					<span class="k">return </span><span class="nb">true</span><span class="p">;</span>
				<span class="o">}</span>
		
				/<span class="k">**</span>
				 <span class="k">*</span> Create the resource <span class="k">for </span>a DS component.
				 <span class="k">*</span> 
				 <span class="k">*</span> @param list
				 <span class="k">*</span> @param name
				 <span class="k">*</span> @param info
				 <span class="k">*</span> @throws UnsupportedEncodingException
				 <span class="k">*</span>/
				Resource createComponentResource<span class="o">(</span>String name, String impl, Map&lt;String, String&gt; info<span class="o">)</span>
						throws Exception <span class="o">{</span>
					HeaderReader hr <span class="o">=</span> new HeaderReader<span class="o">(</span>analyzer<span class="o">)</span><span class="p">;</span>
					Tag tag <span class="o">=</span> hr.createComponentTag<span class="o">(</span>name, impl, info<span class="o">)</span><span class="p">;</span>
					hr.close<span class="o">()</span><span class="p">;</span>
					<span class="k">return </span>new TagResource<span class="o">(</span>tag<span class="o">)</span><span class="p">;</span>
				<span class="o">}</span>
			<span class="o">}</span>
		
		<span class="o">}</span>
			
			
			
			
			
			
				private void verifyComponent<span class="o">()</span> <span class="o">{</span>
	String serviceComponent <span class="o">=</span> main.get<span class="o">(</span>Constants.SERVICE_COMPONENT<span class="o">)</span><span class="p">;</span>
	<span class="k">if</span> <span class="o">(</span>serviceComponent <span class="o">!=</span> null<span class="o">)</span> <span class="o">{</span>
		Parameters map <span class="o">=</span> parseHeader<span class="o">(</span>serviceComponent<span class="o">)</span><span class="p">;</span>
		<span class="k">for</span> <span class="o">(</span>String component : map.keySet<span class="o">())</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span>component.indexOf<span class="o">(</span><span class="s2">"*"</span><span class="o">)</span> &lt; 0 <span class="o">&amp;&amp;</span> <span class="o">!</span>dot.exists<span class="o">(</span>component<span class="o">))</span> <span class="o">{</span>
				error<span class="o">(</span>Constants.SERVICE_COMPONENT + <span class="s2">" entry can not be located in JAR: "</span> + component<span class="o">)</span><span class="p">;</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				// validate component ...
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<p>TODO Needs review - AI Generated content</p>

				</main>
			</div>
	</ul>




	
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<div class="container-right">
		<nav class="next-prev" data-pagefind-ignore>
     
    <a href='/releases/7.2.0/heads/require_capability.html' title="Require-Capability ::= requirement ( ',' requirement )*">Prev</a> 
     
    
    <a href='/releases/7.2.0/heads/src.html' title="src">Next</a>
     
</nav>
	</div>

	<div class="modal" id="searchmodal" aria-hidden="true">
    <div class="modal_overlay" tabindex="-1">
        <div class="modal_container" role="dialog" aria-modal="true">
            <header class="modal_header" style="margin-bottom: 10px;">
                <b>
                    Search
                    <button class="modal_btn modal_btn-primary" data-modal-close=""
                        aria-label="Close this dialog window" style="float:right;">Close</button>
                </b>
            </header>
            <main class="modal_content" id="modalcontent">
                <div id="pagefindsearch"></div>
            </main>
            <footer class="modal_footer">

            </footer>
        </div>
    </div>
</div>

<style>
    /* Basic styling to hide/show the modal */
    .modal {
        display: none;
        /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
    }

    /* Container for modal content */
    .modal_container {
        background: #fff;
        margin: 5% auto;
        /* Position the box somewhat centered */
        padding: 1rem;
        max-width: 600px;
        border-radius: 4px;
        position: relative;

        /* Height and overflow for scrolling */
        max-height: 80vh;
        /* Use 80% of the viewport height */
        overflow-y: auto;
        /* Enable scrolling within the modal */
    }

    /* When modal is open, display it */
    .modal.is-open {
        display: block;
    }
</style>

<script type="text/javascript">
    // Function to open the modal
    function openModal() {
        const modal = document.getElementById('searchmodal');
        // Change aria-hidden to false
        modal.setAttribute('aria-hidden', 'false');
        // Add a class to make it visible (assuming CSS uses .is-open to show)
        modal.classList.add('is-open');

        const searchFieldInput = document.querySelector('#modalcontent input');
        searchFieldInput.focus();

        // Define an event listener for the ESC key
        escapeKeyListener = function (event) {
            if (event.key === 'Escape' || event.key === 'Esc') {
                closeModal(modal);
            }
        };

        // Attach the ESC key event listener
        document.addEventListener('keydown', escapeKeyListener);

        // Attach click event listeners to close triggers
        attachCloseEvents(modal);
    }

    function attachCloseEvents(modal) {
        // Get all elements that can close the modal (overlay and close button)
        const closeElements = modal.querySelectorAll('[data-modal-close]');

        closeElements.forEach(el => {
            el.addEventListener('click', function handleClose() {
                closeModal(modal);
                // Remove this event listener once closed (cleanup)
                el.removeEventListener('click', handleClose);
            });
        });
    }

    // Function to close the modal
    function closeModal(modal) {
        modal.setAttribute('aria-hidden', 'true');
        modal.classList.remove('is-open');
    }
</script>



<link href="/pagefindindex/pagefind-ui.css" rel="stylesheet">
<script src="/pagefindindex/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
            element: "#pagefindsearch",
            showSubResults: true,
            translations: {
                placeholder: "Search the bnd manual",
            },
            openFilters: ['pagetype']

        });
    });
</script>

	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/releases/7.2.0/">Home</a>
			</ul>
	</ul>

	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', () => {
			const headers = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id]');

			headers.forEach(header => {
				const iconLink = document.createElement('a');
				iconLink.href = `#${header.id}`;
				iconLink.innerHTML = '#';
				iconLink.className = 'header-link';

				// Wrap the icon inside a span to control visibility with CSS
				const wrapper = document.createElement('span');
				wrapper.className = 'header-link-wrapper';
				wrapper.appendChild(iconLink);

				// Append the wrapper to the header
				header.appendChild(wrapper);
			});
		});


		// copy to clipboard buttons

		const copyButtonLabel = "Copy";
		let blocks = document.querySelectorAll("pre.highlight");

		blocks.forEach((block) => {
		// only add button if browser supports Clipboard API
		if (navigator.clipboard) {
			let button = document.createElement("button");
			button.classList.add("copycodebtn");

			button.innerText = copyButtonLabel;
			block.appendChild(button);

			button.addEventListener("click", async () => {
			await copyCode(block, button);
			});

		}
		});

		async function copyCode(block, button) {
		let code = block.querySelector("code");
		let text = code.innerText;

		await navigator.clipboard.writeText(text);

		button.innerText = "Copied";

			setTimeout(()=> {
				button.innerText = copyButtonLabel;
			},2000)
		}
	</script>

</footer>

</body>
</html>
