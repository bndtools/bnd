<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/7.2.0/css/style.css" rel="stylesheet" />
<link rel="stylesheet" href="/css/github.dark.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="sitemap" type="application/xml" title="bnd Sitemap" href="/sitemap.xml">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Metatype | bnd</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Metatype" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The OSGi Metatype specification provides a language to describe configuration information in an XML file. However, XML is cumbersome to use and eXtreMeLy error prone, and refactoring often finds it hard to change references in XML text files. Especially with DS components managing the relations can be complex, see Components" />
<meta property="og:description" content="The OSGi Metatype specification provides a language to describe configuration information in an XML file. However, XML is cumbersome to use and eXtreMeLy error prone, and refactoring often finds it hard to change references in XML text files. Especially with DS components managing the relations can be complex, see Components" />
<meta property="og:site_name" content="bnd" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-12-27T00:11:56+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Metatype" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-12-27T00:11:56+01:00","datePublished":"2025-12-27T00:11:56+01:00","description":"The OSGi Metatype specification provides a language to describe configuration information in an XML file. However, XML is cumbersome to use and eXtreMeLy error prone, and refactoring often finds it hard to change references in XML text files. Especially with DS components managing the relations can be complex, see Components","headline":"Metatype","mainEntityOfPage":{"@type":"WebPage","@id":"/releases/7.2.0/chapters/210-metatype.html"},"url":"/releases/7.2.0/chapters/210-metatype.html"}</script>
<!-- End Jekyll SEO tag -->


	

	

	

	

	

	

	

	

	

	

	

	

	

	
		<style>
			 body {
				counter-reset: h1 14;
			}
		</style>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

</head>


<body>
	
<ul class="container12 menu-bar" style="display:flex;align-items:center">
	<li span=8><a class=menu-link href="/releases/7.2.0/"><img
			class=menu-logo src="/releases/7.2.0/img/bnd-80x40-white.png"></a>
			<a 
				class="" 
				href="/releases/7.2.0/chapters/110-introduction.html">Intro
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/800-headers.html">Headers
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/825-instructions-ref.html">Instructions
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/855-macros-ref.html">Macros
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/400-commands.html">Commands
			</a>
			<div class="releases">
				<button class="dropbtn"><span class="fa fa-bars"></span> 7.2.0</button>
				<div class="dropdown-content"></div>
			</div>
    <li span=4>     
        <div class="search-container">
			<button type="button" class="fa fa-search" onclick="openModal()"></button>
       </div>
</ul>
<div class=menu-link span=0><a
	id="repo-link"
	href="https://github.com/bndtools/bnd/blob/master/docs/_chapters/210-metatype.md"
	target="_blank"
>
	<img
		style="
			position: absolute;
			top: 0;
			right: 0;
			margin: 0;
			padding: 4px;
			z-index: 100;
			width: 45px;
		"
		src="/img/github-mark.svg"
		alt="Fork me on GitHub"
		title="Fork me on GitHub"
/></a>
</div>



					

	<ul class=container12>
		<li span=3>
			<div class="side-nav">
			
	
	<ul class="side-nav">
	<li><span class="side-nav-section">Getting Started</span>
		<ul class="side-nav">
		
			
				

					
					<li><a href="/releases/7.2.0/chapters/110-introduction.html">Introduction</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/120-install.html">How to install bnd</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/123-tour-workspace.html">Guided Tour Workspace & Projects</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/125-tour-features.html">bnd / bndlib Features and JAR Wrapping Techniques</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/920-faq.html">FAQ - Frequently Asked Questions</a></li>
					

				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Concepts and Practices</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/130-concepts.html">Concepts</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/135-history.html">Background</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/140-best-practices.html">Best practices</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Build and Development</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/150-build.html">Build</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/160-jars.html">Generating JARs</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/170-versioning.html">Versioning</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/180-baselining.html">Baselining</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/200-components.html">Service Components</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li class=selected>Metatype</li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/220-contracts.html">Contracts</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/230-manifest-annotations.html">Bundle Annotations</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/235-accessor-properties.html">Accessor Properties</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/240-spi-annotations.html">SPI Annotations</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Dependency and Launching</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/250-resolving.html">Resolving Dependencies</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/300-launching.html">Launching</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/305-startlevels.html">Startlevels</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Testing</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/310-testing.html">Testing</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/315-launchpad-testing.html">Testing with Launchpad</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Packaging and Distribution</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/320-packaging.html">Packaging Applications</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/330-jpms.html">JPMS Libraries</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Documentation and Tools</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/395-generating-documentation.html">Generating Documentation</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/400-commands.html">bnd CLI Commands</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/600-developer.html">For Developers</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/620-template-fragments.html">Templates for Workspaces</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/650-windows.html">Tips for Windows users</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/700-tools.html">Tools bound to bnd</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Reference Material</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/790-reference.html">Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/800-headers.html">Headers</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/820-instructions.html">Instruction Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/825-instructions-ref.html">Instruction Index</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/850-macros.html">Macro Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/855-macros-ref.html">Macro Index</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/870-plugins.html">Plugins</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/875-external-plugins.html">External Plugins</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Configuration and Troubleshooting</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/880-settings.html">Settings</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/900-errors.html">Errors</a></li>
					

				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/910-warnings.html">Warnings</a></li>
					

				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>




			</div>
			
		<li span=9>
			<div class=notes-margin>

<main data-pagefind-body>
				<div class="page-header">
					<h1 data-pagefind-filter="pagetype:chapters"> Metatype</h1>
					<div class="container-right">
						<nav class="next-prev" data-pagefind-ignore>
     
    <a href='/releases/7.2.0/chapters/200-components.html' title="Service Components">Prev</a> 
     
    
    <a href='/releases/7.2.0/chapters/220-contracts.html' title="Contracts">Next</a>
     
</nav>
						
						
						
					</div>
					
				</div>

				<p>The <a href="https://docs.osgi.org/specification/osgi.cmpn/8.0.0/service.metatype.html">OSGi Metatype specification</a> provides a language to describe configuration information in an XML file. However, XML is cumbersome to use and eXtreMeLy error prone, and refactoring often finds it hard to change references in XML text files. Especially with DS components managing the relations can be complex, see <a href="/chapters/200-components.html">Components</a></p>

<p>For this reason, bnd provides annotations to define the XML based on a ‘‘configuration’’ interface. For example, the following interface defines a simple metatype:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  package com.acme<span class="p">;</span>
  import aQute.bnd.annotation.metatype.<span class="k">*</span><span class="p">;</span>

  @Meta.OCD interface Config <span class="o">{</span>
    int port<span class="o">()</span><span class="p">;</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>To turn this into an XML file, the bnd file must contain:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">-metatype</span>: <span class="k">*</span>
</code></pre></div></div>

<p>The wild card will search through the whole bundle but it is possible to limit this to a restricted set of packages to speed up the processing. For example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">-metatype</span>: <span class="k">*</span>Metatype<span class="k">*</span>, com.libs.metatypes
</code></pre></div></div>

<p>If the previous <code class="language-shell highlighter-rouge">Config</code> interface is present in the output, the output will also contain an XML file at <code class="language-shell highlighter-rouge">OSGI-INF/metatype/com.acme.Config.xml</code>. This file will look as follows:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;metatype:MetaData</span> 
    <span class="na">xmlns:metatype=</span><span class="s">'http://www.osgi.org/xmlns/metatype/v1.1.0'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;OCD</span> 
      <span class="na">name=</span><span class="s">'Config'</span> 
      <span class="na">id=</span><span class="s">'aQute.metatype.samples.Config'</span> 
      <span class="na">localization=</span><span class="s">'aQute.metatype.samples.Config'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AD</span> 
        <span class="na">name=</span><span class="s">'Port'</span> 
        <span class="na">id=</span><span class="s">'port'</span> 
        <span class="na">cardinality=</span><span class="s">'0'</span> 
        <span class="na">required=</span><span class="s">'true'</span> 
        <span class="na">type=</span><span class="s">'Integer'</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/OCD&gt;</span>
    <span class="nt">&lt;Designate</span> <span class="na">pid=</span><span class="s">'aQute.metatype.samples.Config'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Object</span> <span class="na">ocdref=</span><span class="s">'aQute.metatype.samples.Config'</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Designate&gt;</span>
  <span class="nt">&lt;/metatype:MetaData&gt;</span>
</code></pre></div></div>

<p>bnd leverages the rich type information the Java class files contain. It inspects the returns types and from this it automatically calculates the AD type as well as the cardinality. For example, a method like:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="nf">ints</span><span class="o">()</span>
</code></pre></div></div>

<p>Provides an AD of:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;AD</span> 
      <span class="na">name=</span><span class="s">'Ints'</span> 
      <span class="na">id=</span><span class="s">'ints'</span> 
      <span class="na">cardinality=</span><span class="s">'-2147483648'</span> 
      <span class="na">required=</span><span class="s">'true'</span> 
      <span class="na">type=</span><span class="s">'Integer'</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<h2 id="naming">Naming</h2>
<p>bnd attempts to make the names of the OCD and AD human readable by un-camel-casing the id. This means that it uses the upper cases in the id to decide where to use spaces. It also attempts to replace ‘_’ characters with spaces and removes ‘$’. If the result is not what is wanted, the name can always be explicitly set with the AD.name() field.</p>

<p>The id of the properties is by default derived from the method name. The name space of methods is restricted by the Java language both in character set as well as by the reserved keywords. Therefore, bnd mangles the name of the method to allow the method name to be adapted to common practices in proeprty names.</p>

<ul>
  <li>’$’ is removed from the name unless it is followed by another ‘$’, in that case it is a single ‘$’. This can be used to use Java keywords as a name. For example, <code class="language-shell highlighter-rouge"><span class="nv">$new</span></code> maps to the <code class="language-shell highlighter-rouge">new</code> name. To make the name <code class="language-shell highlighter-rouge"><span class="nv">$x</span></code>, use a method with the name <code class="language-shell highlighter-rouge"><span class="nv">$$</span>x</code>.</li>
  <li>‘<em>’ is replaced with ‘.’ unless it is followed by another ‘</em>’, in that case it becomes a single ‘_’. This is useful for dotted names (<code class="language-shell highlighter-rouge">a.b.c</code> comes from <code class="language-shell highlighter-rouge">a_b_c</code>) and to indicate private properties, that is properties that start with a ‘.’. For example, <code class="language-shell highlighter-rouge">_secret</code> maps to <code class="language-shell highlighter-rouge">.secret</code> and this will be a property that is not registered as a service.</li>
</ul>

<p>For example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@OCD</span>
  <span class="kd">interface</span> <span class="nc">Config</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">_password</span><span class="o">();</span> <span class="c1">// .password - will not be registered as a service</span>
    <span class="nc">String</span> <span class="n">$new</span><span class="o">();</span>      <span class="c1">// new - keyword</span>
  <span class="o">}</span>
</code></pre></div></div>

<h2 id="metaocd">@Meta.OCD</h2>
<p>The OCD annotation is necessary to know that an interface is a Metatype interface. It should be used preferably without any parameters (they all have good defaults). However, each default is possible to override. The following table discusses the fields:</p>

<table>
  <tbody>
    <tr>
      <td><code class="language-shell highlighter-rouge">name</code></td>
      <td>String</td>
      <td>A human readable name of the component, can be localized if it starts with a % sign. The default is a string derived from the id where _, $, or camel casing is used to provide spaces.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge"><span class="nb">id</span></code></td>
      <td>String</td>
      <td>The id of the OCD, this will also be used for the pid of the Designate element.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">localization</code></td>
      <td>String</td>
      <td>The localization id of the metatype. This refers to a properties file in the OSGI-INF/i10l/<localization>.properties file that can be augmented with locale information.</localization></td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">description</code></td>
      <td>String</td>
      <td>A human readable description that can be localized. Default is empty.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">factory</code></td>
      <td>String</td>
      <td>Will treat this OCD as intended to be for a factory configuration. The default is <code class="language-shell highlighter-rouge"><span class="nb">false</span></code></td>
    </tr>
  </tbody>
</table>

<h2 id="metaad">@Meta.AD</h2>
<p>The <code class="language-shell highlighter-rouge">AD</code> is an optional annotation on methods of a OCD interface. The annotation makes it possible to override the defaults and provide extra information.</p>

<table>
  <tbody>
    <tr>
      <td><code class="language-shell highlighter-rouge">name</code></td>
      <td>String</td>
      <td>A human readable name of the attribute, can be localized if it starts with a % sign. The default is a string derived from the method name where _, $, or camel casing is used to provide spaces.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge"><span class="nb">id</span></code></td>
      <td>String</td>
      <td>The id of the attribute. By default this is the name of the method</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">description</code></td>
      <td>String</td>
      <td>A human readable description that can be localized. Default is empty.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge"><span class="nb">type</span></code></td>
      <td>String</td>
      <td>The type of the attribute. This must be one of the types defined in the Metatype specification. By default the type will be derived from the return type of the method. If no applicable type can be found then the <code class="language-shell highlighter-rouge">String</code> type is used as final default.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">cardinality</code></td>
      <td>int</td>
      <td>The cardinality of the attribute. If this is negative its absolute indicates maximum number of elements in a Vector. If it is positive it indicates the maximum number of values in an array. Zero indicates a scalar. If not provided, bnd will calculate the cardinality based on the return type. Collections will have a negative large value and arrays have a positive large value.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">min</code></td>
      <td>String</td>
      <td>The minimum value allowed for this attribute. There is no default.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">max</code></td>
      <td>String</td>
      <td>The maximum value allowed for this attribute. There is no default.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">deflt</code></td>
      <td>String</td>
      <td>The default initial value. The default for this is an empty String</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">required</code></td>
      <td>boolean</td>
      <td>Indicates if this attribute is required. The default is that attributes are required.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">optionLabels</code></td>
      <td>String[]</td>
      <td>Labels for any values specified in <code class="language-shell highlighter-rouge">optionValues</code>. The default value is unset if there are no optionValues are defined. If these are defined, then the labels are calculated from the values by making _, $ into spaces and providing spaces between camel cased words in the values.</td>
    </tr>
    <tr>
      <td><code class="language-shell highlighter-rouge">optionValues</code></td>
      <td>String[]</td>
      <td>Optional values. If this field is not set and the return type is an enum type then the values are calculated from the enum members.</td>
    </tr>
  </tbody>
</table>

<h2 id="runtime-conversions">Runtime conversions</h2>
<p>The type support the OSGi Metatype specification is limited to the primitives and strings. So what happens when you use another type? During the build phase, bnd will revert to a ‘String’ Metatype type. This means that those special types are going to be strings in the dictionary. However, the aQute.bnd.annotation.metatype package contains a helper class that simplifies the usage of properties in runtime.</p>

<p>It has a <code class="language-shell highlighter-rouge">@createConfigurable<span class="o">(</span>Class&lt;T&gt; c, Map&lt;?,?&gt; props<span class="o">)</span></code>. This method returns an object that implements the given configuration interface. The implementation of these methods uses the properties to provide a value. That is, calling the method <code class="language-shell highlighter-rouge">abc<span class="o">()</span></code> on this interface will attempt to find the property <code class="language-shell highlighter-rouge"><span class="s2">"abc"</span></code>. It will then use the actual return type of the method to do conversion from the type in the properties to the return type. This takes generic information into account when present.</p>

<p>For example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Meta</span><span class="o">.</span><span class="na">OCD</span>
  <span class="kd">interface</span> <span class="nc">Config</span> <span class="o">{</span>
    <span class="no">URI</span><span class="o">[]</span> <span class="nf">uris</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updated</span><span class="o">(</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">props</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">config</span> <span class="o">=</span> <span class="nc">Configurable</span><span class="o">.</span><span class="na">createConfigurable</span><span class="o">(</span><span class="nc">Config</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="n">props</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span> <span class="no">URI</span> <span class="no">URI</span> <span class="o">:</span> <span class="n">config</span><span class="o">.</span><span class="na">uris</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
      <span class="o">...</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre></div></div>

<p>The Metatype specification does not support URIs, so how does this work? Lets first look at the AD:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;AD</span> 
     <span class="na">name=</span><span class="s">'uris'</span> 
     <span class="na">id=</span><span class="s">'uris'</span> 
     <span class="na">cardinality=</span><span class="s">'2147483647'</span> 
     <span class="na">required=</span><span class="s">'true'</span> 
     <span class="na">type=</span><span class="s">'String'</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>Any editor will therefore put an array of strings (<code class="language-shell highlighter-rouge">String[]</code>) in the properties. When the proxy gets the string, it will therefore have to convert from the <code class="language-shell highlighter-rouge">String[]</code> -&gt; <code class="language-shell highlighter-rouge">URI[]</code>. In this case, the URI has a String constructor and is used to do the conversion from String to URI. The converter can handle general array to collection, collection to array, and as indicated, any conversion to an object that has a String constructor.</p>

<p>For convenience there are a number of built int conversions provided that cannot leverage the <code class="language-shell highlighter-rouge">String</code> constructor:</p>

<ul>
  <li>Pattern - Allows regular expression to be set</li>
  <li>Class&lt;?&gt; - Tries to load a class through the class loader of the configuration interface</li>
  <li>boolean - Converts wrappers and primitive boolean to 0 (false) or non-0 (true) and vice versa.</li>
  <li>Numbers - Converts any known Number subclass to another Number subclass, including the primitive types.</li>
  <li>Enums - If the return type is an enum, it will use the <code class="language-shell highlighter-rouge">valueOf</code> method to get an instance.</li>
</ul>

<h2 id="example">Example</h2>
<p>The following example shows a very simple metatype configuration interface:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">aQute.metatype.samples</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">aQute.bnd.annotation.metatype.Meta.*</span><span class="o">;</span>
  <span class="nd">@OCD</span>
  <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Config</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">port</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>If the bnd.bnd file contains:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">-metatype</span>: <span class="k">*</span>
</code></pre></div></div>

<p>Then bnd will detect this class as a Metatype and it generates the following XML in `OSGi-INF/metatype/aQute.metatype.samples.Config.xml</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="cp">&lt;?xml version='1.0'?&gt;</span>
  <span class="nt">&lt;metatype:MetaData</span> 
     <span class="na">xmlns:metatype=</span><span class="s">'http://www.osgi.org/xmlns/metatype/v1.1.0'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;OCD</span> 
      <span class="na">name=</span><span class="s">'Config'</span> 
      <span class="na">id=</span><span class="s">'aQute.metatype.samples.Config'</span>   
      <span class="na">localization=</span><span class="s">'aQute.metatype.samples.Config'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;AD</span> 
        <span class="na">name=</span><span class="s">'Port'</span> 
        <span class="na">id=</span><span class="s">'port'</span> 
        <span class="na">cardinality=</span><span class="s">'0'</span> 
        <span class="na">required=</span><span class="s">'true'</span> 
        <span class="na">type=</span><span class="s">'Integer'</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/OCD&gt;</span>
    <span class="nt">&lt;Designate</span> <span class="na">pid=</span><span class="s">'aQute.metatype.samples.Config'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Object</span> <span class="na">ocdref=</span><span class="s">'aQute.metatype.samples.Config'</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Designate&gt;</span>
  <span class="nt">&lt;/metatype:MetaData&gt;</span>
</code></pre></div></div>

<p>As usual, XML does an outstanding job in obfuscating the interesting parts. If you’re using the <a href="https://felix.apache.org/documentation/subprojects/apache-felix-web-console.html">Apache Felix Webconsole</a> (and if not, why not?) then you can edit this metatype on the web.</p>

<p>This metatype can now be used in a simple example that prints the port number:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">aQute.metatype.samples</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.osgi.service.cm.*</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">aQute.bnd.annotation.component.*</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">aQute.bnd.annotation.metatype.*</span><span class="o">;</span>

  <span class="nd">@Component</span><span class="o">(</span><span class="n">properties</span><span class="o">=</span><span class="s">"service.pid=aQute.metatype.samples.Config"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Echo</span> <span class="kd">implements</span> <span class="nc">ManagedService</span> <span class="o">{</span>
	
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updated</span><span class="o">(</span><span class="nc">Dictionary</span> <span class="n">properties</span><span class="o">)</span> 
      <span class="kd">throws</span> <span class="nc">ConfigurationException</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span> <span class="n">properties</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
        <span class="nc">Config</span> <span class="n">config</span> <span class="o">=</span> <span class="nc">Configurable</span><span class="o">.</span><span class="na">createConfigurable</span><span class="o">(</span>
          <span class="nc">Config</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">properties</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">config</span><span class="o">.</span><span class="na">port</span><span class="o">());</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>The editor can get quite rich with the <a href="https://bndtools.org/services/org.osgi.service.metatype.html">metatype information</a>.</p>

<p>This information came from the following Meta interface:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">interface</span> <span class="nc">SampleConfig</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">_secret</span><span class="o">();</span>
    <span class="nc">String</span> <span class="n">$new</span><span class="o">();</span>
    <span class="nc">String</span> <span class="nf">name</span><span class="o">();</span>
    <span class="kd">enum</span> <span class="no">X</span> <span class="o">{</span> <span class="no">A</span><span class="o">,</span> <span class="no">B</span><span class="o">,</span> <span class="no">C</span><span class="o">;</span> <span class="o">}</span>
    <span class="no">X</span> <span class="nf">x</span><span class="o">();</span>
    <span class="kt">int</span> <span class="nf">birthYear</span><span class="o">();</span>
    <span class="no">URI</span> <span class="nf">uri</span><span class="o">();</span>
    <span class="no">URI</span><span class="o">[]</span> <span class="nf">uris</span><span class="o">();</span>
    <span class="nc">Collection</span><span class="o">&lt;</span><span class="no">URI</span><span class="o">&gt;</span> <span class="nf">curis</span><span class="o">();</span>
    <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="nf">ints</span><span class="o">();</span> <span class="c1">// fails on webconsole</span>
  <span class="o">}</span> 
</code></pre></div></div>

<p>Though this is a big savings over normal fudging with properties, it gets better. The metatyping is fully integrated with DS. In this example, we’re using DS to register the Managed Service but this is not necessary because DS will automatically use the name of a component as the PID. So with a component life can be as easy as:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Component</span><span class="o">(</span><span class="n">designate</span><span class="o">=</span><span class="nc">Config</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Echo2</span> <span class="o">{</span>	
    <span class="nd">@Activate</span>
    <span class="kt">void</span> <span class="nf">activate</span><span class="o">(</span><span class="nc">Map</span><span class="o">&lt;?,?&gt;</span> <span class="n">properties</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ConfigurationException</span> <span class="o">{</span>
      <span class="nc">Config</span> <span class="n">config</span> <span class="o">=</span> <span class="nc">Configurable</span><span class="o">.</span><span class="na">createConfigurable</span><span class="o">(</span>
         <span class="nc">Config</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">properties</span><span class="o">);</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">config</span><span class="o">.</span><span class="na">port</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>No more strings. Components and metatypes are extensively explained in <a href="/chapters/200-components.html">Components</a>.</p>

<p>Also see the articles on <a href="https://bndtools.org/doc/217-ds.html">Service Components</a> and <a href="https://bndtools.org/tutorial_base/450-debug.html">Debugging</a>.</p>


				</main>
			</div>
	</ul>




	
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<div class="container-right">
		<nav class="next-prev" data-pagefind-ignore>
     
    <a href='/releases/7.2.0/chapters/200-components.html' title="Service Components">Prev</a> 
     
    
    <a href='/releases/7.2.0/chapters/220-contracts.html' title="Contracts">Next</a>
     
</nav>
	</div>

	<div class="modal" id="searchmodal" aria-hidden="true">
    <div class="modal_overlay" tabindex="-1">
        <div class="modal_container" role="dialog" aria-modal="true">
            <header class="modal_header" style="margin-bottom: 10px;">
                <b>
                    Search
                    <button class="modal_btn modal_btn-primary" data-modal-close=""
                        aria-label="Close this dialog window" style="float:right;">Close</button>
                </b>
            </header>
            <main class="modal_content" id="modalcontent">
                <div id="pagefindsearch"></div>
            </main>
            <footer class="modal_footer">

            </footer>
        </div>
    </div>
</div>

<style>
    /* Basic styling to hide/show the modal */
    .modal {
        display: none;
        /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
    }

    /* Container for modal content */
    .modal_container {
        background: #fff;
        margin: 5% auto;
        /* Position the box somewhat centered */
        padding: 1rem;
        max-width: 600px;
        border-radius: 4px;
        position: relative;

        /* Height and overflow for scrolling */
        max-height: 80vh;
        /* Use 80% of the viewport height */
        overflow-y: auto;
        /* Enable scrolling within the modal */
    }

    /* When modal is open, display it */
    .modal.is-open {
        display: block;
    }
</style>

<script type="text/javascript">
    // Function to open the modal
    function openModal() {
        const modal = document.getElementById('searchmodal');
        // Change aria-hidden to false
        modal.setAttribute('aria-hidden', 'false');
        // Add a class to make it visible (assuming CSS uses .is-open to show)
        modal.classList.add('is-open');

        const searchFieldInput = document.querySelector('#modalcontent input');
        searchFieldInput.focus();

        // Define an event listener for the ESC key
        escapeKeyListener = function (event) {
            if (event.key === 'Escape' || event.key === 'Esc') {
                closeModal(modal);
            }
        };

        // Attach the ESC key event listener
        document.addEventListener('keydown', escapeKeyListener);

        // Attach click event listeners to close triggers
        attachCloseEvents(modal);
    }

    function attachCloseEvents(modal) {
        // Get all elements that can close the modal (overlay and close button)
        const closeElements = modal.querySelectorAll('[data-modal-close]');

        closeElements.forEach(el => {
            el.addEventListener('click', function handleClose() {
                closeModal(modal);
                // Remove this event listener once closed (cleanup)
                el.removeEventListener('click', handleClose);
            });
        });
    }

    // Function to close the modal
    function closeModal(modal) {
        modal.setAttribute('aria-hidden', 'true');
        modal.classList.remove('is-open');
    }
</script>



<link href="/pagefindindex/pagefind-ui.css" rel="stylesheet">
<script src="/pagefindindex/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
            element: "#pagefindsearch",
            showSubResults: true,
            translations: {
                placeholder: "Search the bnd manual",
            },
            openFilters: ['pagetype']

        });
    });
</script>

	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/releases/7.2.0/">Home</a>
			</ul>
	</ul>

	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', () => {
			const headers = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id]');

			headers.forEach(header => {
				const iconLink = document.createElement('a');
				iconLink.href = `#${header.id}`;
				iconLink.innerHTML = '#';
				iconLink.className = 'header-link';

				// Wrap the icon inside a span to control visibility with CSS
				const wrapper = document.createElement('span');
				wrapper.className = 'header-link-wrapper';
				wrapper.appendChild(iconLink);

				// Append the wrapper to the header
				header.appendChild(wrapper);
			});
		});


		// copy to clipboard buttons

		const copyButtonLabel = "Copy";
		let blocks = document.querySelectorAll("pre.highlight");

		blocks.forEach((block) => {
		// only add button if browser supports Clipboard API
		if (navigator.clipboard) {
			let button = document.createElement("button");
			button.classList.add("copycodebtn");

			button.innerText = copyButtonLabel;
			block.appendChild(button);

			button.addEventListener("click", async () => {
			await copyCode(block, button);
			});

		}
		});

		async function copyCode(block, button) {
		let code = block.querySelector("code");
		let text = code.innerText;

		await navigator.clipboard.writeText(text);

		button.innerText = "Copied";

			setTimeout(()=> {
				button.innerText = copyButtonLabel;
			},2000)
		}
	</script>

</footer>

</body>
</html>
