<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/7.2.0/css/style.css" rel="stylesheet" />
<link rel="stylesheet" href="/css/github.dark.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="sitemap" type="application/xml" title="bnd Sitemap" href="/sitemap.xml">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Service Components | bnd</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Service Components" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Service-Component header is compatible with the standard OSGi header syntax. Any element in the list that does not have attributes must have a resource in the JAR and is copied as is to the manifest. However, simple components can also be defined inline, and it is even possible to pickup annotations." />
<meta property="og:description" content="The Service-Component header is compatible with the standard OSGi header syntax. Any element in the list that does not have attributes must have a resource in the JAR and is copied as is to the manifest. However, simple components can also be defined inline, and it is even possible to pickup annotations." />
<meta property="og:site_name" content="bnd" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-12-27T00:11:56+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Service Components" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-12-27T00:11:56+01:00","datePublished":"2025-12-27T00:11:56+01:00","description":"The Service-Component header is compatible with the standard OSGi header syntax. Any element in the list that does not have attributes must have a resource in the JAR and is copied as is to the manifest. However, simple components can also be defined inline, and it is even possible to pickup annotations.","headline":"Service Components","mainEntityOfPage":{"@type":"WebPage","@id":"/releases/7.2.0/chapters/200-components.html"},"url":"/releases/7.2.0/chapters/200-components.html"}</script>
<!-- End Jekyll SEO tag -->


	

	

	

	

	

	

	

	

	

	

	

	

	
		<style>
			 body {
				counter-reset: h1 13;
			}
		</style>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

</head>


<body>
	
<ul class="container12 menu-bar" style="display:flex;align-items:center">
	<li span=8><a class=menu-link href="/releases/7.2.0/"><img
			class=menu-logo src="/releases/7.2.0/img/bnd-80x40-white.png"></a>
			<a 
				class="" 
				href="/releases/7.2.0/chapters/110-introduction.html">Intro
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/800-headers.html">Headers
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/825-instructions-ref.html">Instructions
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/855-macros-ref.html">Macros
			</a>
			<a 
				class=""
				href="/releases/7.2.0/chapters/400-commands.html">Commands
			</a>
			<div class="releases">
				<button class="dropbtn"><span class="fa fa-bars"></span> 7.2.0</button>
				<div class="dropdown-content"></div>
			</div>
    <li span=4>     
        <div class="search-container">
			<button type="button" class="fa fa-search" onclick="openModal()"></button>
       </div>
</ul>
<div class=menu-link span=0><a
	id="repo-link"
	href="https://github.com/bndtools/bnd/blob/master/docs/_chapters/200-components.md"
	target="_blank"
>
	<img
		style="
			position: absolute;
			top: 0;
			right: 0;
			margin: 0;
			padding: 4px;
			z-index: 100;
			width: 45px;
		"
		src="/img/github-mark.svg"
		alt="Fork me on GitHub"
		title="Fork me on GitHub"
/></a>
</div>



					

	<ul class=container12>
		<li span=3>
			<div class="side-nav">
			
	
	<ul class="side-nav">
	<li><span class="side-nav-section">Getting Started</span>
		<ul class="side-nav">
		
			
				

					
					<li><a href="/releases/7.2.0/chapters/110-introduction.html">Introduction</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/120-install.html">How to install bnd</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/123-tour-workspace.html">Guided Tour Workspace & Projects</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/125-tour-features.html">bnd / bndlib Features and JAR Wrapping Techniques</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/920-faq.html">FAQ - Frequently Asked Questions</a></li>
					

				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Concepts and Practices</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/130-concepts.html">Concepts</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/135-history.html">Background</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/140-best-practices.html">Best practices</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Build and Development</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/150-build.html">Build</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/160-jars.html">Generating JARs</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/170-versioning.html">Versioning</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/180-baselining.html">Baselining</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li class=selected>Service Components</li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/210-metatype.html">Metatype</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/220-contracts.html">Contracts</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/230-manifest-annotations.html">Bundle Annotations</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/235-accessor-properties.html">Accessor Properties</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/240-spi-annotations.html">SPI Annotations</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Dependency and Launching</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/250-resolving.html">Resolving Dependencies</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/300-launching.html">Launching</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/305-startlevels.html">Startlevels</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Testing</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/310-testing.html">Testing</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/315-launchpad-testing.html">Testing with Launchpad</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Packaging and Distribution</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/320-packaging.html">Packaging Applications</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/330-jpms.html">JPMS Libraries</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Documentation and Tools</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/395-generating-documentation.html">Generating Documentation</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/400-commands.html">bnd CLI Commands</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/600-developer.html">For Developers</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/620-template-fragments.html">Templates for Workspaces</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/650-windows.html">Tips for Windows users</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/700-tools.html">Tools bound to bnd</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Reference Material</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/790-reference.html">Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/800-headers.html">Headers</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/820-instructions.html">Instruction Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/825-instructions-ref.html">Instruction Index</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/850-macros.html">Macro Reference</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/855-macros-ref.html">Macro Index</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/870-plugins.html">Plugins</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/875-external-plugins.html">External Plugins</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>

	
	<ul class="side-nav">
	<li><span class="side-nav-section">Configuration and Troubleshooting</span>
		<ul class="side-nav">
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/880-settings.html">Settings</a></li>
					

				
				
			
				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/900-errors.html">Errors</a></li>
					

				
				
			
				
				
			
				
				
			
			
		
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				
				
			
				

					
					<li><a href="/releases/7.2.0/chapters/910-warnings.html">Warnings</a></li>
					

				
				
			
				
				
			
			
		
		</ul>
	</li>
	</ul>




			</div>
			
		<li span=9>
			<div class=notes-margin>

<main data-pagefind-body>
				<div class="page-header">
					<h1 data-pagefind-filter="pagetype:chapters"> Service Components</h1>
					<div class="container-right">
						<nav class="next-prev" data-pagefind-ignore>
     
    <a href='/releases/7.2.0/chapters/180-baselining.html' title="Baselining">Prev</a> 
     
    
    <a href='/releases/7.2.0/chapters/210-metatype.html' title="Metatype">Next</a>
     
</nav>
						
						
						
					</div>
					
				</div>

				<p>The Service-Component header is compatible with the standard OSGi header syntax. Any element in the list that does not have attributes must have a resource in the JAR and is copied as is to the manifest. However, simple components can also be defined inline, and it is even possible to pickup annotations.</p>

<p>The syntax for these component definitions is:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>component ::<span class="o">=</span> &lt;name&gt; <span class="o">(</span> <span class="s1">';'</span> parameter <span class="o">)</span> <span class="k">*</span>
parameter ::<span class="o">=</span> provide | reference | multiple | optional
            | reference | properties | factory | servicefactory
            | immediate | enabled | implementation
            | activate | deactivate | modified | configuration-policy
            | version | designate

reference ::<span class="o">=</span> &lt;name&gt; <span class="s1">'='</span> &lt;interface-class&gt;
               <span class="o">(</span> <span class="s1">'('</span> &lt;target-filter&gt; <span class="s1">')'</span><span class="o">)</span>? cardinality?
cardinality ::<span class="o">=</span> <span class="s1">'?'</span> | <span class="s1">'*'</span> | <span class="s1">'+'</span> | <span class="s1">'~'</span>
provide  ::<span class="o">=</span> <span class="s1">'provide:='</span> LIST
multiple  ::<span class="o">=</span> <span class="s1">'multiple:='</span> LIST
optional  ::<span class="o">=</span> <span class="s1">'optional:='</span> LIST
dynamic   ::<span class="o">=</span> <span class="s1">'dynamic:='</span> LIST
designate  ::<span class="o">=</span> <span class="o">(</span> <span class="s1">'designate'</span> | <span class="s1">'designateFactory'</span> <span class="o">)</span> CLASS
factory   ::<span class="o">=</span> <span class="s1">'factory:='</span> <span class="nb">true</span> | <span class="nb">false
</span>servicefactory :<span class="o">=</span> <span class="s1">'servicefactory:='</span> <span class="nb">true</span> | <span class="nb">false
</span>immediate ::<span class="o">=</span> <span class="s1">'immediate:='</span> <span class="nb">true</span> | <span class="nb">false
</span>enabled   ::<span class="o">=</span> <span class="s1">'enabled:='</span> <span class="nb">true</span> | <span class="nb">false
</span>configuration-policy ::<span class="o">=</span> <span class="s2">"configuration-policy:='
     ( 'optional' | 'require' | 'ignore' )
activate  ::= 'activate:=' METHOD
modified  ::= 'modified:=' METHOD
deactivate::= 'deactivate:=' METHOD
implementation::= 'implementation:=' &lt;implementation-class&gt;
properties::= 'properties:=' key '=' value
              ( ',' key '=' value ) *
key       ::= NAME (( '@' | ':' ) type )?
value     ::= value ( '|' value )*
</span></code></pre></div></div>

<p>If the name of the component maps to a resource, or ends in XML, or there are attributes set, then that clause is copied to the output Service-Component header.</p>

<p>If the name can be expanded to one or more classes that have component annotations (they must be inside the JAR), then each of those classes is analyzed for its component annotations. These annotations are then merged with the attributes from the header, where the header attributes override annotations. The expansion uses the normal wildcard rules. For example, <code class="language-shell highlighter-rouge">biz.aQute.components.<span class="k">*</span></code> will search for component annotated classes in the  <code class="language-shell highlighter-rouge">biz.aQute.components</code> package or one of its descendants. The classes must be present in the JAR. If no classes with annotations can be found for the <code class="language-shell highlighter-rouge">name</code> then it is assumed to be name or implementation class name without annotations.</p>

<p>The name of the component is also the implementation class (unless overridden by the implementation: directive). It is then followed with a number of references and directives. A reference defines a name that can be used with the <code class="language-shell highlighter-rouge">locateService</code> method from the <code class="language-shell highlighter-rouge">ComponentContext</code> class. If the name starts with a lower case character, it is assume to be a bean property. In that case the reference is augmented with a <code class="language-shell highlighter-rouge"><span class="nb">set</span>&lt;Name&gt;</code> and <code class="language-shell highlighter-rouge"><span class="nb">unset</span>&lt;Name&gt;</code> method according to the standard bean rules. Bnd will interpret the header, read the annotations if possible, and create the corresponding resources in the output jar under the name <code class="language-shell highlighter-rouge">OSGI-INF/&lt;<span class="nb">id</span><span class="o">&gt;</span>.xml</code>.</p>

<p>Annotations are only recognized on the component class, super classes are not inspected for the components.</p>

<p>The supported annotations in the <code class="language-shell highlighter-rouge">aQute.bnd.annotations.component</code> package are:</p>

<p>||!Component||
Annotated the class, indicates this class is required to be a component. It has the following properties:</p>

<table>
  <tbody>
    <tr>
      <td> </td>
      <td>provide</td>
      <td> </td>
      <td>Class[]</td>
      <td> </td>
      <td>Service interfaces, the default is all directly implemented interfaces</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>name</td>
      <td> </td>
      <td>String</td>
      <td> </td>
      <td>Name of the component</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>factory</td>
      <td> </td>
      <td>Boolean</td>
      <td> </td>
      <td>Factory component</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>servicefactory</td>
      <td> </td>
      <td>Boolean</td>
      <td> </td>
      <td>Service Factory</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>immediate</td>
      <td> </td>
      <td>Boolean</td>
      <td> </td>
      <td>Immediate activation</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>designate</td>
      <td> </td>
      <td>CLASS</td>
      <td> </td>
      <td>Designate a class as a [[MetaType]] interface used for configurations for unitary configurations, see [[#metatype]]. This changes the default of the configurationPolicy to <code class="language-shell highlighter-rouge">require</code>.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>designateFactory</td>
      <td> </td>
      <td>CLASS</td>
      <td> </td>
      <td>Designate a class as a [[MetaType]] interface used for configurations for factory configurations, see [[#metatype]]. This changes the default of the configurationPolicy to <code class="language-shell highlighter-rouge">require</code>.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>configurationPolicy</td>
      <td> </td>
      <td>OPTIONAL, REQUIRE, IGNORE</td>
      <td> </td>
      <td>Configuration Policy</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>enabled</td>
      <td> </td>
      <td>Boolean</td>
      <td> </td>
      <td>Enabled component</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>properties</td>
      <td> </td>
      <td>String[]</td>
      <td> </td>
      <td>Properties specified as an array of <code class="language-shell highlighter-rouge"><span class="nv">key</span><span class="o">=</span>value</code>. The property type can be specified in the key as <code class="language-shell highlighter-rouge">name:Integer</code>. The value can contain multiple values, the parts must then be separated by a vertical bar (‘</td>
      <td>’) or a line feed (\n), for example <code class="language-shell highlighter-rouge">properties <span class="o">=</span> <span class="o">{</span><span class="s2">"primes:Integer==1|2|3|5|7|11"</span></code>}.</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>||!Reference||
On a method. Indicates this method is the activate method. It has the following attributes</p>

<table>
  <tbody>
    <tr>
      <td> </td>
      <td>name</td>
      <td> </td>
      <td>String</td>
      <td> </td>
      <td>Name of the reference. Default this is the name of the method without set on it.</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>service</td>
      <td> </td>
      <td>Class</td>
      <td> </td>
      <td>The service type, default is the argument type of the method. The unset method is derived from this name. I.e. setXX will have an unsetXX method to unset the reference.</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>type</td>
      <td> </td>
      <td>Character</td>
      <td> </td>
      <td>Standard cardinality type ‘?’, ‘*’, ‘+’,’~’</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>target</td>
      <td> </td>
      <td>String</td>
      <td> </td>
      <td>A filter expression applied to the properties of the target service</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>unbind</td>
      <td> </td>
      <td>String</td>
      <td> </td>
      <td>Optional name of the unbind method. By default this is the same name as the bind method name but with set/add replaced with unset/remove. E.g. setFoo() bind method becomes unsetFoo() unbind method.</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p><code class="language-shell highlighter-rouge">@Reference</code> automatically sets the bind method. The unbind method is set by using a derived name from the bind method or providing it with the name of the unbind method. The following name patterns are supported:</p>

<p>||!bind||!unbind||
||<code class="language-shell highlighter-rouge">setX</code> ||<code class="language-shell highlighter-rouge">unsetX</code>||
||<code class="language-shell highlighter-rouge">addX</code> ||<code class="language-shell highlighter-rouge">removeX</code>||
||<code class="language-shell highlighter-rouge">xxxX</code> ||<code class="language-shell highlighter-rouge">unxxxX</code>||
For example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Reference
protected void setFoo<span class="o">(</span>LogService l<span class="o">)</span> <span class="o">{</span> ... <span class="o">}</span>
protected void unsetFoo<span class="o">(</span>LogService l<span class="o">)</span> <span class="o">{</span> ... <span class="o">}</span>
</code></pre></div></div>

<p>If you want to override this, use</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Reference<span class="o">(</span><span class="nv">unbind</span><span class="o">=</span><span class="s2">"IRefuseToCallMyMethodUnFoo"</span><span class="o">)</span><span class="p">;</span>
protected void foo<span class="o">(</span>LogService l<span class="o">)</span> <span class="o">{}</span>
protected void IRefuseToCallMyMethodUnFoo<span class="o">(</span>LogService l<span class="o">)</span> <span class="o">{}</span>
</code></pre></div></div>

<p>Unfortunately Java has no method references so it is not type safe.A non existent <code class="language-shell highlighter-rouge">@UnReference</code> annotation is not very useful because that still requires linking it up symbolically to the associated <code class="language-shell highlighter-rouge">@Reference</code>.</p>

<p>||!Activate, Modified, and Deactivate||
The life cycle methods. These annotations have no properties.</p>

<p>Assume the JAR contains the following class:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>package com.acme<span class="p">;</span>
import org.osgi.service.event.<span class="k">*</span><span class="p">;</span>
import org.osgi.service.log.<span class="k">*</span><span class="p">;</span>
import aQute.bnd.annotation.component.<span class="k">*</span><span class="p">;</span>

@Component
public class AnnotatedComponent implements EventHandler <span class="o">{</span>
  LogService log<span class="p">;</span>

  @Reference
  void setLog<span class="o">(</span>LogService log<span class="o">)</span> <span class="o">{</span> this.log<span class="o">=</span>log<span class="p">;</span> <span class="o">}</span>

  public void handleEvent<span class="o">(</span>Event event<span class="o">)</span> <span class="o">{</span>
    log.log<span class="o">(</span>LogService.LOG_INFO, event.getTopic<span class="o">())</span><span class="p">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The only thing necessary to register the Declarative Service component is to add the following Service-Component header:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Service-Component: com.acme.<span class="k">*</span>
</code></pre></div></div>

<p>This header will look for annotations in all com.acme sub-packages for an annotated component. The resulting XML will look like:</p>

<p>OSGI-INF/com.acme.AnnotatedComponent.xml:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s1">'1.0'</span> <span class="nv">encoding</span><span class="o">=</span><span class="s1">'utf-8'</span>?&gt;
&lt;component <span class="nv">name</span><span class="o">=</span><span class="s1">'com.acme.AnnotatedComponent'</span><span class="o">&gt;</span>
  &lt;implementation <span class="nv">class</span><span class="o">=</span><span class="s1">'com.acme.AnnotatedComponent'</span>/&gt;
  &lt;service&gt;
    &lt;provide <span class="nv">interface</span><span class="o">=</span><span class="s1">'org.osgi.service.event.EventHandler'</span>/&gt;
  &lt;/service&gt;
  &lt;reference <span class="nv">name</span><span class="o">=</span><span class="s1">'log'</span>
    <span class="nv">interface</span><span class="o">=</span><span class="s1">'org.osgi.service.log.LogService'</span>
    <span class="nb">bind</span><span class="o">=</span><span class="s1">'setLog'</span>
    <span class="nv">unbind</span><span class="o">=</span><span class="s1">'unsetLog'</span>/&gt;
&lt;/component&gt;
</code></pre></div></div>

<p>The following example shows a component that is bound to the log service via the setLog method without annotations:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Service-Component<span class="o">=</span>aQute.tutorial.component.World<span class="p">;</span>
  <span class="nv">log</span><span class="o">=</span>org.osgi.service.log.LogService
</code></pre></div></div>

<p>The Service Component Runtime (SCR) offers a variety of options on the reference. Some options like the target can be used by adding the target filter after the interface name (this likely requires putting quotes around the interface name+filter).</p>

<p>References can be suffixed with the following characters to indicate their cardinality:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Char          Cardinality    Policy
?             0..1           dynamic
<span class="k">*</span>             0..n           dynamic
+             1..n           dynamic
~             0..1           static
              1              static
</code></pre></div></div>

<p>For a more complex example:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Service-Component<span class="o">=</span>aQute.tutorial.component.World<span class="p">;</span>
  <span class="nv">log</span><span class="o">=</span>org.osgi.service.log.LogService?<span class="p">;</span>
  <span class="nv">http</span><span class="o">=</span>org.osgi.service.http.HttpService<span class="p">;</span>
  <span class="nv">PROCESSORS</span><span class="o">=</span><span class="s2">"xierpa.service.processor.Processor(priority&gt;1)+"</span><span class="p">;</span>
  properties:<span class="o">=</span><span class="s2">"wazaabi=true"</span>
</code></pre></div></div>

<p>The previous example will result in the following service component in the resource <code class="language-shell highlighter-rouge">OSGI-INF/aQute.tutorial.component.World.xml</code>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span> ?&gt;
&lt;component <span class="nv">name</span><span class="o">=</span><span class="s2">"aQute.tutorial.component.World"</span><span class="o">&gt;</span>
  &lt;implementation <span class="nv">class</span><span class="o">=</span><span class="s2">"aQute.tutorial.component.World"</span> /&gt;
  &lt;reference <span class="nv">name</span><span class="o">=</span><span class="s2">"log"</span>
    <span class="nv">interface</span><span class="o">=</span><span class="s2">"org.osgi.service.log.LogService"</span>
    <span class="nv">cardinality</span><span class="o">=</span><span class="s2">"0..1"</span>
    <span class="nb">bind</span><span class="o">=</span><span class="s2">"setLog"</span>
    <span class="nv">unbind</span><span class="o">=</span><span class="s2">"unsetLog"</span>
    <span class="nv">policy</span><span class="o">=</span><span class="s2">"dynamic"</span> /&gt;
  &lt;reference <span class="nv">name</span><span class="o">=</span><span class="s2">"http"</span>
    <span class="nv">interface</span><span class="o">=</span><span class="s2">"org.osgi.service.http.HttpService"</span>
    <span class="nb">bind</span><span class="o">=</span><span class="s2">"setHttp"</span>
    <span class="nv">unbind</span><span class="o">=</span><span class="s2">"unsetHttp"</span> /&gt;
  &lt;reference <span class="nv">name</span><span class="o">=</span><span class="s2">"PROCESSORS"</span>
    <span class="nv">interface</span><span class="o">=</span><span class="s2">"xierpa.service.processor.Processor"</span>
    <span class="nv">cardinality</span><span class="o">=</span><span class="s2">"1..n"</span>
    <span class="nv">policy</span><span class="o">=</span><span class="s2">"dynamic"</span>
    <span class="nv">target</span><span class="o">=</span><span class="s2">"(&amp;(priority&gt;=1)(link=false))"</span> /&gt;
&lt;/component&gt;
</code></pre></div></div>

<p>The description also supports the immediate, enabled, factory, target, servicefactory, configuration-policy, activate, deactivate, and modified attributes. Refer to the Declarative Services definition for their semantics.</p>

<p>If any feature of the V1.1 namespace is used, then bnd will declare the namespace in the <code class="language-shell highlighter-rouge">component</code> element. A specific namespace version can be set with the <code class="language-shell highlighter-rouge">version</code> directive. This detection only works when components are used.</p>

<p>Bnd also supports setting the policy and cardinality through the following directives:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>multiple:<span class="o">=</span> LIST    names of references that have x..n
optional:<span class="o">=</span> LIST    names of references that have 0..x
dynamic:<span class="o">=</span>  LIST    names of references that are dynamic
</code></pre></div></div>

<h2 id="components-and-metatype">Components and Metatype</h2>
<p>The Service Component Runtime works closely together with the Configuration Admin to allow the components to be controlled through configuration. Configuration Admin knows two types of configuration:</p>

<ul>
  <li>Unitary</li>
  <li>Factory</li>
</ul>

<p>A unitary configuration can be set and changed but there is at most one of them. A Factory configuration can be used to create multiple instances of the same component. A component has a configuration policy that defines when no configuration is set.</p>

<ul>
  <li>optional - If no configuration is set (either unitary or factory) then the component is still created.</li>
  <li>require - This requires a unitary configuration to be set or one or more factory configurations before a component is created.</li>
  <li>ignore - Ignore configuration information</li>
</ul>

<p>A related standard is the Metatype standard. The Metatype Service provides a repository of property descriptors. Bundles can provide these descriptors in their bundles in the OSGI-INF/metatype directory. There are tools, like the <a href="https://felix.apache.org/documentation/subprojects/apache-felix-web-console.html">Felix Webconsole</a>, that can provide an editing window for a configuration that is typed with a metatype description.</p>

<p>In practice, this is a powerful model that provides a lot of configurability for your components with easy editing but getting it all right is not trivial. To make this easier, bnd has made it ease to use configurations.</p>

<p>In this model, configurations are declared in an interface. For example, the following interface defines a simple message:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>interface Config <span class="o">{</span>
  String message<span class="o">()</span><span class="p">;</span> // message to give
<span class="o">}</span>
</code></pre></div></div>

<p>To create a component that can work with this config, we need to designate that interface as the configuration interface for a component.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Component<span class="o">(</span><span class="nv">designate</span><span class="o">=</span>Config.class<span class="o">)</span>
public class BasicComponent <span class="o">{</span>
    Config config<span class="p">;</span>

    @Activate void activate<span class="o">(</span>Map&lt;String,Object&gt; props<span class="o">)</span> <span class="o">{</span>
       config <span class="o">=</span> Configurable.createConfig<span class="o">(</span>props<span class="o">)</span><span class="p">;</span>
       System.out.println<span class="o">(</span><span class="s2">"Hi "</span> + config.message<span class="o">())</span><span class="p">;</span>
    <span class="o">}</span>

    @Deactivate void deactivate<span class="o">()</span> <span class="o">{</span>
       System.out.println<span class="o">(</span><span class="s2">"Bye "</span> + config.message<span class="o">())</span><span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This is an immediate component because it does not implement a service interface. It also requires a configuration because we have not specified this explicitly. When you use designate (or designateFactory) the default becomes require. This means that your component will only be created when there is actually configuration for it set.</p>

<p>To run this component, make sure you have the Felix Webconsole running and the MetaType service installed. In the Webconsole, you can click on
‘'’Configuration’’’, your component should be listed on this page. By Clicking on the component with the name ‘'’Basic Component Config’’’ you get an editor window.</p>

<p>The editor is aware of the proper types, it uses the [[MetaType]] standard to describe the properties. bnd uses the type information on the interface as well as the optional Metadata annotations to create a rich description that allows the web console to provide a good editor.</p>

<p>You can fill in the message in the ‘‘Message’’ field. If you save the editor, your component prints the message with “Hi” in front of it. Deleting the configuration will print the message with “Bye”.</p>

<p>If you change the message, you will see that the component is first deactivated and then reactivated again. This is the only possibility for the SCR because the component has not implemented a modified method. Adding the following method will change this, now changes to the configuration are signaled to the component and the component can continue to work. This is more complicated then recycling the component but it can create a more optimized system.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Modified
void modified<span class="o">(</span> Map&lt;String,Object&gt; props<span class="o">)</span> <span class="o">{</span>
  // reuse activate method
  activate<span class="o">(</span>props<span class="o">)</span><span class="p">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>It is also possible to take advantage of the configuration factories. In this model</p>

<p>An example, that implements a simple socket server on a configurable port and returns a message when a telnet session is opened to that port can be found on <a href="https://github.com/bndtools/aQute/blob/master/aQute.metatype/src/aQute/metatype/components/ServerSocketComponent.java">Github</a>.</p>


				</main>
			</div>
	</ul>




	
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<div class="container-right">
		<nav class="next-prev" data-pagefind-ignore>
     
    <a href='/releases/7.2.0/chapters/180-baselining.html' title="Baselining">Prev</a> 
     
    
    <a href='/releases/7.2.0/chapters/210-metatype.html' title="Metatype">Next</a>
     
</nav>
	</div>

	<div class="modal" id="searchmodal" aria-hidden="true">
    <div class="modal_overlay" tabindex="-1">
        <div class="modal_container" role="dialog" aria-modal="true">
            <header class="modal_header" style="margin-bottom: 10px;">
                <b>
                    Search
                    <button class="modal_btn modal_btn-primary" data-modal-close=""
                        aria-label="Close this dialog window" style="float:right;">Close</button>
                </b>
            </header>
            <main class="modal_content" id="modalcontent">
                <div id="pagefindsearch"></div>
            </main>
            <footer class="modal_footer">

            </footer>
        </div>
    </div>
</div>

<style>
    /* Basic styling to hide/show the modal */
    .modal {
        display: none;
        /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
    }

    /* Container for modal content */
    .modal_container {
        background: #fff;
        margin: 5% auto;
        /* Position the box somewhat centered */
        padding: 1rem;
        max-width: 600px;
        border-radius: 4px;
        position: relative;

        /* Height and overflow for scrolling */
        max-height: 80vh;
        /* Use 80% of the viewport height */
        overflow-y: auto;
        /* Enable scrolling within the modal */
    }

    /* When modal is open, display it */
    .modal.is-open {
        display: block;
    }
</style>

<script type="text/javascript">
    // Function to open the modal
    function openModal() {
        const modal = document.getElementById('searchmodal');
        // Change aria-hidden to false
        modal.setAttribute('aria-hidden', 'false');
        // Add a class to make it visible (assuming CSS uses .is-open to show)
        modal.classList.add('is-open');

        const searchFieldInput = document.querySelector('#modalcontent input');
        searchFieldInput.focus();

        // Define an event listener for the ESC key
        escapeKeyListener = function (event) {
            if (event.key === 'Escape' || event.key === 'Esc') {
                closeModal(modal);
            }
        };

        // Attach the ESC key event listener
        document.addEventListener('keydown', escapeKeyListener);

        // Attach click event listeners to close triggers
        attachCloseEvents(modal);
    }

    function attachCloseEvents(modal) {
        // Get all elements that can close the modal (overlay and close button)
        const closeElements = modal.querySelectorAll('[data-modal-close]');

        closeElements.forEach(el => {
            el.addEventListener('click', function handleClose() {
                closeModal(modal);
                // Remove this event listener once closed (cleanup)
                el.removeEventListener('click', handleClose);
            });
        });
    }

    // Function to close the modal
    function closeModal(modal) {
        modal.setAttribute('aria-hidden', 'true');
        modal.classList.remove('is-open');
    }
</script>



<link href="/releases/7.2.0/pagefindindex/pagefind-ui.css" rel="stylesheet">
<script src="/releases/7.2.0/pagefindindex/pagefind-ui.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
            element: "#pagefindsearch",
            showSubResults: true,
            translations: {
                placeholder: "Search the bnd manual",
            },
            openFilters: ['pagetype']

        });
    });
</script>

	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/releases/7.2.0/">Home</a>
			</ul>
	</ul>

	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', () => {
			const headers = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id]');

			headers.forEach(header => {
				const iconLink = document.createElement('a');
				iconLink.href = `#${header.id}`;
				iconLink.innerHTML = '#';
				iconLink.className = 'header-link';

				// Wrap the icon inside a span to control visibility with CSS
				const wrapper = document.createElement('span');
				wrapper.className = 'header-link-wrapper';
				wrapper.appendChild(iconLink);

				// Append the wrapper to the header
				header.appendChild(wrapper);
			});
		});


		// copy to clipboard buttons

		const copyButtonLabel = "Copy";
		let blocks = document.querySelectorAll("pre.highlight");

		blocks.forEach((block) => {
		// only add button if browser supports Clipboard API
		if (navigator.clipboard) {
			let button = document.createElement("button");
			button.classList.add("copycodebtn");

			button.innerText = copyButtonLabel;
			block.appendChild(button);

			button.addEventListener("click", async () => {
			await copyCode(block, button);
			});

		}
		});

		async function copyCode(block, button) {
		let code = block.querySelector("code");
		let text = code.innerText;

		await navigator.clipboard.writeText(text);

		button.innerText = "Copied";

			setTimeout(()=> {
				button.innerText = copyButtonLabel;
			},2000)
		}
	</script>

</footer>

</body>
</html>
