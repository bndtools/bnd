<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/4.3.0/css/style.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>-stalecheck srcs ‘;newer=’ depends ( ‘;’ ( warning error command ))* …</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="-stalecheck srcs ‘;newer=’ depends ( ‘;’ ( warning error command ))* …" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="If you work in Bndtools then there is normally little to worry about, bndtools keeps everything up to dated all the time. Any file you save, and guaranteed in s short time all dependent bundles are updated. This comes with a crucial guarantee that anything you do in Bndtools is faithfully reproduced on the build server using Gradle. For a default workspace there is no need for any gradle specific files. All the workspace’s settings are defined in the bnd files." />
<meta property="og:description" content="If you work in Bndtools then there is normally little to worry about, bndtools keeps everything up to dated all the time. Any file you save, and guaranteed in s short time all dependent bundles are updated. This comes with a crucial guarantee that anything you do in Bndtools is faithfully reproduced on the build server using Gradle. For a default workspace there is no need for any gradle specific files. All the workspace’s settings are defined in the bnd files." />
<script type="application/ld+json">
{"@type":"WebPage","url":"/releases/4.3.0/instructions/stalecheck.html","headline":"-stalecheck srcs ‘;newer=’ depends ( ‘;’ ( warning error command ))* …","description":"If you work in Bndtools then there is normally little to worry about, bndtools keeps everything up to dated all the time. Any file you save, and guaranteed in s short time all dependent bundles are updated. This comes with a crucial guarantee that anything you do in Bndtools is faithfully reproduced on the build server using Gradle. For a default workspace there is no need for any gradle specific files. All the workspace’s settings are defined in the bnd files.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
















































































</head>


<body>


<ul class="container12 menu-bar">
	<li span=11><a class=menu-link href="/releases/4.3.0/"><img
			class=menu-logo src='/releases/4.3.0/img/bnd-80x40-white.png'></a>
			<a href="/releases/4.3.0/chapters/110-introduction.html">Intro
			</a><a href="/releases/4.3.0/chapters/800-headers.html">Headers
			</a><a href="/releases/4.3.0/chapters/825-instructions-ref.html">Instructions
			</a><a href="/releases/4.3.0/chapters/855-macros-ref.html">Macros
			</a><a href="/releases/4.3.0/chapters/400-commands.html">Commands
			</a><div class="releases"><button class="dropbtn">4.3.0</button><div class="dropdown-content"></div></div>

	<li class=menu-link span=1>
			<a href="https://github.com/bndtools/bnd" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</ul>




	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">


			<li><a href="/releases/4.3.0/chapters/110-introduction.html">Introduction</a>



			<li><a href="/releases/4.3.0/chapters/120-install.html">How to install bnd</a>



			<li><a href="/releases/4.3.0/chapters/123-tour-workspace.html">Guided Tour</a>



			<li><a href="/releases/4.3.0/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>



			<li><a href="/releases/4.3.0/chapters/130-concepts.html">Concepts</a>



			<li><a href="/releases/4.3.0/chapters/140-best-practices.html">Best practices</a>



			<li><a href="/releases/4.3.0/chapters/150-build.html">Build</a>



			<li><a href="/releases/4.3.0/chapters/155-project-setup.html">Project Setup</a>



			<li><a href="/releases/4.3.0/chapters/160-jars.html">Generating JARs</a>



			<li><a href="/releases/4.3.0/chapters/170-versioning.html">Versioning</a>



			<li><a href="/releases/4.3.0/chapters/180-baselining.html">Baselining</a>



			<li><a href="/releases/4.3.0/chapters/200-components.html">Service Components</a>



			<li><a href="/releases/4.3.0/chapters/210-metatype.html">Metatype</a>



			<li><a href="/releases/4.3.0/chapters/220-contracts.html">Contracts</a>



			<li><a href="/releases/4.3.0/chapters/230-manifest-annotations.html">Bundle Annotations</a>



			<li><a href="/releases/4.3.0/chapters/235-accessor-properties.html">Accessor Properties</a>



			<li><a href="/releases/4.3.0/chapters/240-spi-annotations.html">SPI Annotations</a>



			<li><a href="/releases/4.3.0/chapters/250-resolving.html">Resolving Dependencies</a>



			<li><a href="/releases/4.3.0/chapters/300-launching.html">Launching</a>



			<li><a href="/releases/4.3.0/chapters/305-startlevels.html">Startlevels</a>



			<li><a href="/releases/4.3.0/chapters/310-testing.html">Testing</a>



			<li><a href="/releases/4.3.0/chapters/315-launchpad-testing.html">Testing with Launchpad</a>



			<li><a href="/releases/4.3.0/chapters/320-packaging.html">Packaging Applications</a>



			<li><a href="/releases/4.3.0/chapters/330-jpms.html">JPMS Libraries</a>



			<li><a href="/releases/4.3.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>



			<li><a href="/releases/4.3.0/chapters/395-generating-documentation.html">Generating Documentation</a>



			<li><a href="/releases/4.3.0/chapters/400-commands.html">Commands</a>



			<li><a href="/releases/4.3.0/chapters/600-developer.html">For Developers</a>



			<li><a href="/releases/4.3.0/chapters/700-tools.html">Tools bound to bnd</a>



			<li><a href="/releases/4.3.0/chapters/800-headers.html">Headers</a>



			<li><a href="/releases/4.3.0/chapters/820-instructions.html">Instruction Reference</a>



			<li><a href="/releases/4.3.0/chapters/825-instructions-ref.html">Instruction Index</a>



			<li><a href="/releases/4.3.0/chapters/850-macros.html">Macro Reference</a>



			<li><a href="/releases/4.3.0/chapters/855-macros-ref.html">Macro Index</a>



			<li><a href="/releases/4.3.0/chapters/870-plugins.html">Plugins</a>



			<li><a href="/releases/4.3.0/chapters/880-settings.html">Settings</a>



			<li><a href="/releases/4.3.0/chapters/900-errors.html">Errors</a>



			<li><a href="/releases/4.3.0/chapters/910-warnings.html">Warnings</a>



			<li><a href="/releases/4.3.0/chapters/920-faq.html">Frequently Asked Questions</a>


</ul>

			</div>

		<li span=9>
			<div class=notes-margin>
				<h1> -stalecheck srcs ';newer=' depends ( ';' ( warning | error | command ))* ...</h1>
				<p>If you work in Bndtools then there is normally little to worry about, bndtools keeps everything up to dated all the time.
Any file you save, and guaranteed in s short time all dependent bundles are updated. This comes with a crucial guarantee
that anything you do in Bndtools is faithfully reproduced on the build server using Gradle. For a default workspace there
is no need for any gradle specific files. All the workspace’s settings are defined in the bnd files.</p>

<p>However, sometimes it is necessary to generate sources that need to be compiled. There are then two choices when you
checkout a workspace. Always use the command line let the build do its magic or checkin the generated sources.
Although generally frowned upon, it has the advantage that you do not need to store the tool itself under version control.
Any revision can always compile regardless of what happened to the tool. It is also nice to see it on Github, it actually
makes the experience of the majority of people that use the workspace and usually not touch the swagger file blithely
unaware of the underlying complexities.</p>

<p>However, this has a very serious problem. Sometimes you touch the swagger file and forget to run the gradle to generate
new sources. It would be very convenient if bnd could generate an error if certain files were out of date respective
to a set of other files.  Thhe <code class="highlighter-rouge">-stalecheck</code> instruction has this purpose.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-stalecheck	::= 	clause ( ',' clause )*
clause		::= 	src ';' 'newer=' depends (';' option )*
src		::=	Ant Glob spec
depends		::= 	Ant Glob spec
option		::= 	'error=' STRING
		| 	'warning=' STRING
		| 	'command=' STRING
</code></pre></div></div>

<p>Just before bnd will start making the JAR(s) for a project it will check if any of the files in the <code class="highlighter-rouge">src</code> specification
is newer than the files in the <code class="highlighter-rouge">depends</code> set. If so, it will provide warning or error. If either a specific error or
warning <code class="highlighter-rouge">STRING</code> is given then this is reported accordingly.</p>

<p>If a command <code class="highlighter-rouge">STRING</code> is given it is executed as in the <code class="highlighter-rouge">${system}</code> macro. If the command <code class="highlighter-rouge">STRING</code> starts with a
minus sign (<code class="highlighter-rouge">-</code>) then a failure is not an error, it is reported as warning.</p>

<p>If no command is given, nor an error or warning then a default error is reported.</p>

<h2 id="examples">Examples</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-stalecheck:  \
    openapi.json; \
        newer='gen-src/, checksum.md5'

-stalecheck:   \
    specs/**.md; \
        newer='doc/**.doc' ; \
        error='Markdown needs to be generated'
</code></pre></div></div>


			</div>
	</ul>


<nav class=next-prev>
	<a href='/releases/4.3.0/instructions/sources.html'></a> <a href='/releases/4.3.0/instructions/standalone.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/releases/4.3.0/">GitHub</a>
			</ul>
	</ul>
</footer>

</body>
</html>
