<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/4.1.0/css/style.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Import-Package ::= import ( ‘,’ import )*</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Import-Package ::= import ( ‘,’ import )*" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Import-Package header lists the packages that are required by the contained packages. The default for this header is “*”, resulting in importing all referred packages. This header therefore rarely has to be specified. However, in certain cases there is an unwanted import. The import is caused by code that the author knows can never be reached. This import can be removed by using a negating pattern. A pattern is inserted in the import as an extra import when it contains no wildcards and there is no referral to that package. This can be used to add an import statement for a package that is not referred to by your code but is still needed, for example, because the class is loaded by name." />
<meta property="og:description" content="The Import-Package header lists the packages that are required by the contained packages. The default for this header is “*”, resulting in importing all referred packages. This header therefore rarely has to be specified. However, in certain cases there is an unwanted import. The import is caused by code that the author knows can never be reached. This import can be removed by using a negating pattern. A pattern is inserted in the import as an extra import when it contains no wildcards and there is no referral to that package. This can be used to add an import statement for a package that is not referred to by your code but is still needed, for example, because the class is loaded by name." />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-10-12T20:06:21-04:00" />
<script type="application/ld+json">
{"headline":"Import-Package ::= import ( ‘,’ import )*","dateModified":"2019-10-12T20:06:21-04:00","datePublished":"2019-10-12T20:06:21-04:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/releases/4.1.0/heads/import_package.html"},"url":"/releases/4.1.0/heads/import_package.html","description":"The Import-Package header lists the packages that are required by the contained packages. The default for this header is “*”, resulting in importing all referred packages. This header therefore rarely has to be specified. However, in certain cases there is an unwanted import. The import is caused by code that the author knows can never be reached. This import can be removed by using a negating pattern. A pattern is inserted in the import as an extra import when it contains no wildcards and there is no referral to that package. This can be used to add an import statement for a package that is not referred to by your code but is still needed, for example, because the class is loaded by name.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->






































































</head>


<body>


<ul class="container12 menu-bar">
	<li span=11><a class=menu-link href="/releases/4.1.0/"><img
			class=menu-logo src='/releases/4.1.0/img/bnd-80x40-white.png'></a>
			<a href="/releases/4.1.0/chapters/110-introduction.html">Intro
			</a><a href="/releases/4.1.0/chapters/800-headers.html">Headers
			</a><a href="/releases/4.1.0/chapters/825-instructions-ref.html">Instructions
			</a><a href="/releases/4.1.0/chapters/855-macros-ref.html">Macros
			</a><a href="/releases/4.1.0/chapters/860-commands.html">Commands
			</a><div class="releases"><button class="dropbtn">4.1.0</button><div class="dropdown-content"></div></div>

	<li class=menu-link span=1>
			<a href="https://github.com/bndtools/bnd" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</ul>




	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">


			<li><a href="/releases/4.1.0/chapters/110-introduction.html">Introduction</a>



			<li><a href="/releases/4.1.0/chapters/120-install.html">How to install bnd</a>



			<li><a href="/releases/4.1.0/chapters/123-tour-workspace.html">Guided Tour</a>



			<li><a href="/releases/4.1.0/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>



			<li><a href="/releases/4.1.0/chapters/130-concepts.html">Concepts</a>



			<li><a href="/releases/4.1.0/chapters/140-best-practices.html">Best practices</a>



			<li><a href="/releases/4.1.0/chapters/150-build.html">Build</a>



			<li><a href="/releases/4.1.0/chapters/160-jars.html">Generating JARs</a>



			<li><a href="/releases/4.1.0/chapters/170-versioning.html">Versioning</a>



			<li><a href="/releases/4.1.0/chapters/180-baselining.html">Baselining</a>



			<li><a href="/releases/4.1.0/chapters/200-components.html">Service Components</a>



			<li><a href="/releases/4.1.0/chapters/210-metatype.html">Metatype</a>



			<li><a href="/releases/4.1.0/chapters/220-contracts.html">Contracts</a>



			<li><a href="/releases/4.1.0/chapters/230-manifest-annotations.html">Manifest Annotations</a>



			<li><a href="/releases/4.1.0/chapters/250-resolving.html">Resolving Dependencies</a>



			<li><a href="/releases/4.1.0/chapters/300-launching.html">Launching</a>



			<li><a href="/releases/4.1.0/chapters/310-testing.html">Testing</a>



			<li><a href="/releases/4.1.0/chapters/320-packaging.html">Packaging Applications</a>



			<li><a href="/releases/4.1.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>



			<li><a href="/releases/4.1.0/chapters/400-commandline.html">From the command line</a>



			<li><a href="/releases/4.1.0/chapters/600-developer.html">For Developers</a>



			<li><a href="/releases/4.1.0/chapters/610-plugin.html">Plugins</a>



			<li><a href="/releases/4.1.0/chapters/700-tools.html">Tools bound to bnd</a>



			<li><a href="/releases/4.1.0/chapters/800-headers.html">Header Reference</a>



			<li><a href="/releases/4.1.0/chapters/820-instructions.html">Instruction</a>



			<li><a href="/releases/4.1.0/chapters/825-instructions-ref.html">Instruction Index</a>



			<li><a href="/releases/4.1.0/chapters/850-macros.html">Macro Reference</a>



			<li><a href="/releases/4.1.0/chapters/855-macros-ref.html">Macro Index</a>



			<li><a href="/releases/4.1.0/chapters/860-commands.html">Command Reference</a>



			<li><a href="/releases/4.1.0/chapters/870-plugins.html">Plugins Reference</a>



			<li><a href="/releases/4.1.0/chapters/880-settings.html">Settings</a>



			<li><a href="/releases/4.1.0/chapters/900-errors.html">Errors</a>



			<li><a href="/releases/4.1.0/chapters/910-warnings.html">Warnings</a>



			<li><a href="/releases/4.1.0/chapters/920-faq.html">Frequently Asked Questions</a>


</ul>

			</div>

		<li span=9>
			<div class=notes-margin>
				<h1> Import-Package ::= import ( ',' import )*</h1>
				<p>The Import-Package header lists the packages that are required by the contained packages. The default for this header is “*”, resulting in importing all referred packages. This header therefore rarely has to be specified. However, in certain cases there is an unwanted import. The import is caused by code that the author knows can never be reached. This import can be removed by using a negating pattern. A pattern is inserted in the import as an extra import when it contains no wildcards and there is no referral to that package. This can be used to add an import statement for a package that is not referred to by your code but is still needed, for example, because the class is loaded by name.</p>

<p>For example:
  Import-Package: !org.apache.commons.log4j, com.acme.*,
     com.foo.extra</p>

<p>During processing, bnd will attempt to find the exported version of imported packages. If no version or version range is specified on the import instruction, the exported version will then be used though the micro part and the qualifier are dropped. That is, when the exporter is <code class="highlighter-rouge">1.2.3.build123</code>, then the import version will be 1.2. If a specific version (range) is specified, this will override any found version. This default an be overridden with the [-versionpolicy][#versionpolicy] command.</p>

<p>If an explicit version is given, then ${@} can be used to substitute the found version in a range. In those cases, the version macro can be very useful to calculate ranges or drop specific parts of the version. For example:</p>

<p>Import-Package: org.osgi.framework;version=”[1.3,2.0)”
  Import-Package: org.osgi.framework;version=${@}
  Import-Package: org.osgi.framework;version=”[${versionmask;==;${@}},${versionmask;=+;${@}})”</p>

<p>Packages with directive resolution:=dynamic will be removed from Import-Package and added to the DynamicImport-Package header after being processed like any other Import-Package entry. For example:</p>

<p>Import-Package: org.slf4j.*;resolution:=dynamic, *</p>

<p>If an imported package uses mandatory attributes, then bnd will attempt to add those attributes to the import statement. However, in certain (bizarre!) cases this is not wanted. It is therefore possible to remove an attribute from the import clause. This is done with the <code class="highlighter-rouge">-remove-attribute:</code> directive or by setting the value of an attribute to !. The parameter of the <code class="highlighter-rouge">-remove-attribute</code> directive is an instruction and can use the standard options with !, *, ?, etc.</p>

<p>Import-Package: org.eclipse.core.runtime;-remove-attribute:common,*</p>

<p>Or</p>

<p>Import-Package: org.eclipse.core.runtime;common=!,*</p>

<p>Directives that are not part of the OSGi specification will give a warning unless they are prefixed with a ‘x-‘.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		//
		// IMPORTS
		// Imports MUST come after exports because we use information from
		// the exports
		//
		{
			// Add all exports that do not have an -noimport: directive
			// to the imports.
			Packages referredAndExported = new Packages(referred);
			referredAndExported.putAll(doExportsToImports(exports));

			removeDynamicImports(referredAndExported);

			// Remove any Java references ... where are the closures???
			for (Iterator&lt;PackageRef&gt; i = referredAndExported.keySet().iterator(); i.hasNext();) {
				if (i.next().isJava())
					i.remove();
			}

			Set&lt;Instruction&gt; unused = Create.set();
			String h = getProperty(IMPORT_PACKAGE);
			if (h == null) // If not set use a default
				h = "*";

			if (isPedantic() &amp;&amp; h.trim().length() == 0)
				warning("Empty " + Constants.IMPORT_PACKAGE + " header");

			Instructions filter = new Instructions(h);
			imports = filter(filter, referredAndExported, unused);
			if (!unused.isEmpty()) {
				// We ignore the end wildcard catch
				if (!(unused.size() == 1 &amp;&amp; unused.iterator().next().toString().equals("*")))
					warning("Unused " + Constants.IMPORT_PACKAGE + " instructions: %s ", unused);
			}

			// See what information we can find to augment the
			// imports. I.e. look in the exports
			augmentImports(imports, exports);
		}




			// Checks
		//
		if (referred.containsKey(Descriptors.DEFAULT_PACKAGE)) {
			error("The default package '.' is not permitted by the " + Constants.IMPORT_PACKAGE + " syntax. \n"
					+ " This can be caused by compile errors in Eclipse because Eclipse creates \n"
					+ "valid class files regardless of compile errors.\n"
					+ "The following package(s) import from the default package "
					+ uses.transpose().get(Descriptors.DEFAULT_PACKAGE));
		}


		verifyDirectives(Constants.IMPORT_PACKAGE, "resolution:", PACKAGEPATTERN, "package");


	/**
 * Verify that the imports properly use version ranges.
 */
private void verifyImports() {
	if (isStrict()) {
		Parameters map = parseHeader(manifest.getMainAttributes().getValue(Constants.IMPORT_PACKAGE));
		Set&lt;String&gt; noimports = new HashSet&lt;String&gt;();
		Set&lt;String&gt; toobroadimports = new HashSet&lt;String&gt;();

		for (Entry&lt;String,Attrs&gt; e : map.entrySet()) {
			String version = e.getValue().get(Constants.VERSION_ATTRIBUTE);
			if (version == null) {
				if (!e.getKey().startsWith("javax.")) {
					noimports.add(e.getKey());
				}
			} else {
				if (!VERSIONRANGE.matcher(version).matches()) {
					Location location = error("Import Package %s has an invalid version range syntax %s",
							e.getKey(), version).location();
					location.header = Constants.IMPORT_PACKAGE;
					location.context = e.getKey();
				} else {
					try {
						VersionRange range = new VersionRange(version);
						if (!range.isRange()) {
							toobroadimports.add(e.getKey());
						}
						if (range.includeHigh() == false &amp;&amp; range.includeLow() == false
								&amp;&amp; range.getLow().equals(range.getHigh())) {
							Location location = error(
									"Import Package %s has an empty version range syntax %s, likely want to use [%s,%s]",
									e.getKey(), version, range.getLow(), range.getHigh()).location();
							location.header = Constants.IMPORT_PACKAGE;
							location.context = e.getKey();
						}
						// TODO check for exclude low, include high?
					}
					catch (Exception ee) {
						Location location = error("Import Package %s has an invalid version range syntax %s:%s",
								e.getKey(), version, ee.getMessage()).location();
						location.header = Constants.IMPORT_PACKAGE;
						location.context = e.getKey();
					}
				}
			}
		}

		if (!noimports.isEmpty()) {
			Location location = error("Import Package clauses without version range (excluding javax.*): %s",
					noimports).location();
			location.header = Constants.IMPORT_PACKAGE;
		}
		if (!toobroadimports.isEmpty()) {
			Location location = error(
					"Import Package clauses which use a version instead of a version range. This imports EVERY later package and not as many expect until the next major number: %s",
					toobroadimports).location();
			location.header = Constants.IMPORT_PACKAGE;
		}
	}
}
</code></pre></div></div>


			</div>
	</ul>


<nav class=next-prev>
	<a href='/releases/4.1.0/heads/fragment_host.html'></a> <a href='/releases/4.1.0/heads/include_resource.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=3>
			<ul>
				<li><a href="/releases/4.1.0/contact.html">Contact</a>
			</ul>
		<li span=3>
			<ul>
				<li><a href="/releases/4.1.0/">Developers</a>
			</ul>
		<li span=3>
			<ul>
				<li><a href="/releases/4.1.0/">More</a>
			</ul>
	</ul>
</footer>

</body>
</html>
