<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/4.1.0/css/style.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Provide-Capability ::= capability (‘,’ capability )*</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Provide-Capability ::= capability (‘,’ capability )*" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Parameters capabilities = new Parameters(annotationHeaders.getHeader(PROVIDE_CAPABILITY)); /* * Provide-Capability header */ private void doProvideCapability(ProvideCapability annotation) { StringBuilder sb = new StringBuilder(annotation.ns()); if (annotation.name() != null) sb.append(&quot;;&quot;).append(annotation.ns()).append(&quot;=&#39;&quot;).append(annotation.name()).append(&quot;&#39;&quot;); if (annotation.uses() != null) sb.append(&quot;;&quot;).append(&quot;uses:=&#39;&quot;).append(Strings.join(&quot;,&quot;, annotation.uses())).append(&quot;&#39;&quot;); if (annotation.mandatory() != null) sb.append(&quot;;&quot;).append(&quot;mandatory:=&#39;&quot;).append(Strings.join(&quot;,&quot;, annotation.mandatory())).append(&quot;&#39;&quot;); if (annotation.version() != null) sb.append(&quot;;&quot;).append(&quot;version:Version=&#39;&quot;).append(annotation.version()).append(&quot;&#39;&quot;); if (annotation.value() != null) sb.append(&quot;;&quot;).append(annotation.value()); if (annotation.effective() != null) sb.append(&quot;;effective:=&#39;&quot;).append(annotation.effective()).append(&quot;&#39;&quot;);" />
<meta property="og:description" content="Parameters capabilities = new Parameters(annotationHeaders.getHeader(PROVIDE_CAPABILITY)); /* * Provide-Capability header */ private void doProvideCapability(ProvideCapability annotation) { StringBuilder sb = new StringBuilder(annotation.ns()); if (annotation.name() != null) sb.append(&quot;;&quot;).append(annotation.ns()).append(&quot;=&#39;&quot;).append(annotation.name()).append(&quot;&#39;&quot;); if (annotation.uses() != null) sb.append(&quot;;&quot;).append(&quot;uses:=&#39;&quot;).append(Strings.join(&quot;,&quot;, annotation.uses())).append(&quot;&#39;&quot;); if (annotation.mandatory() != null) sb.append(&quot;;&quot;).append(&quot;mandatory:=&#39;&quot;).append(Strings.join(&quot;,&quot;, annotation.mandatory())).append(&quot;&#39;&quot;); if (annotation.version() != null) sb.append(&quot;;&quot;).append(&quot;version:Version=&#39;&quot;).append(annotation.version()).append(&quot;&#39;&quot;); if (annotation.value() != null) sb.append(&quot;;&quot;).append(annotation.value()); if (annotation.effective() != null) sb.append(&quot;;effective:=&#39;&quot;).append(annotation.effective()).append(&quot;&#39;&quot;);" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-10-12T20:06:21-04:00" />
<script type="application/ld+json">
{"headline":"Provide-Capability ::= capability (‘,’ capability )*","dateModified":"2019-10-12T20:06:21-04:00","datePublished":"2019-10-12T20:06:21-04:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/releases/4.1.0/heads/provide_capabaility.html"},"url":"/releases/4.1.0/heads/provide_capabaility.html","description":"Parameters capabilities = new Parameters(annotationHeaders.getHeader(PROVIDE_CAPABILITY)); /* * Provide-Capability header */ private void doProvideCapability(ProvideCapability annotation) { StringBuilder sb = new StringBuilder(annotation.ns()); if (annotation.name() != null) sb.append(&quot;;&quot;).append(annotation.ns()).append(&quot;=&#39;&quot;).append(annotation.name()).append(&quot;&#39;&quot;); if (annotation.uses() != null) sb.append(&quot;;&quot;).append(&quot;uses:=&#39;&quot;).append(Strings.join(&quot;,&quot;, annotation.uses())).append(&quot;&#39;&quot;); if (annotation.mandatory() != null) sb.append(&quot;;&quot;).append(&quot;mandatory:=&#39;&quot;).append(Strings.join(&quot;,&quot;, annotation.mandatory())).append(&quot;&#39;&quot;); if (annotation.version() != null) sb.append(&quot;;&quot;).append(&quot;version:Version=&#39;&quot;).append(annotation.version()).append(&quot;&#39;&quot;); if (annotation.value() != null) sb.append(&quot;;&quot;).append(annotation.value()); if (annotation.effective() != null) sb.append(&quot;;effective:=&#39;&quot;).append(annotation.effective()).append(&quot;&#39;&quot;);","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->






































































</head>


<body>


<ul class="container12 menu-bar">
	<li span=11><a class=menu-link href="/releases/4.1.0/"><img
			class=menu-logo src='/releases/4.1.0/img/bnd-80x40-white.png'></a>
			<a href="/releases/4.1.0/chapters/110-introduction.html">Intro
			</a><a href="/releases/4.1.0/chapters/800-headers.html">Headers
			</a><a href="/releases/4.1.0/chapters/825-instructions-ref.html">Instructions
			</a><a href="/releases/4.1.0/chapters/855-macros-ref.html">Macros
			</a><a href="/releases/4.1.0/chapters/860-commands.html">Commands
			</a><div class="releases"><button class="dropbtn">4.1.0</button><div class="dropdown-content"></div></div>

	<li class=menu-link span=1>
			<a href="https://github.com/bndtools/bnd" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</ul>




	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">


			<li><a href="/releases/4.1.0/chapters/110-introduction.html">Introduction</a>



			<li><a href="/releases/4.1.0/chapters/120-install.html">How to install bnd</a>



			<li><a href="/releases/4.1.0/chapters/123-tour-workspace.html">Guided Tour</a>



			<li><a href="/releases/4.1.0/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>



			<li><a href="/releases/4.1.0/chapters/130-concepts.html">Concepts</a>



			<li><a href="/releases/4.1.0/chapters/140-best-practices.html">Best practices</a>



			<li><a href="/releases/4.1.0/chapters/150-build.html">Build</a>



			<li><a href="/releases/4.1.0/chapters/160-jars.html">Generating JARs</a>



			<li><a href="/releases/4.1.0/chapters/170-versioning.html">Versioning</a>



			<li><a href="/releases/4.1.0/chapters/180-baselining.html">Baselining</a>



			<li><a href="/releases/4.1.0/chapters/200-components.html">Service Components</a>



			<li><a href="/releases/4.1.0/chapters/210-metatype.html">Metatype</a>



			<li><a href="/releases/4.1.0/chapters/220-contracts.html">Contracts</a>



			<li><a href="/releases/4.1.0/chapters/230-manifest-annotations.html">Manifest Annotations</a>



			<li><a href="/releases/4.1.0/chapters/250-resolving.html">Resolving Dependencies</a>



			<li><a href="/releases/4.1.0/chapters/300-launching.html">Launching</a>



			<li><a href="/releases/4.1.0/chapters/310-testing.html">Testing</a>



			<li><a href="/releases/4.1.0/chapters/320-packaging.html">Packaging Applications</a>



			<li><a href="/releases/4.1.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>



			<li><a href="/releases/4.1.0/chapters/400-commandline.html">From the command line</a>



			<li><a href="/releases/4.1.0/chapters/600-developer.html">For Developers</a>



			<li><a href="/releases/4.1.0/chapters/610-plugin.html">Plugins</a>



			<li><a href="/releases/4.1.0/chapters/700-tools.html">Tools bound to bnd</a>



			<li><a href="/releases/4.1.0/chapters/800-headers.html">Header Reference</a>



			<li><a href="/releases/4.1.0/chapters/820-instructions.html">Instruction</a>



			<li><a href="/releases/4.1.0/chapters/825-instructions-ref.html">Instruction Index</a>



			<li><a href="/releases/4.1.0/chapters/850-macros.html">Macro Reference</a>



			<li><a href="/releases/4.1.0/chapters/855-macros-ref.html">Macro Index</a>



			<li><a href="/releases/4.1.0/chapters/860-commands.html">Command Reference</a>



			<li><a href="/releases/4.1.0/chapters/870-plugins.html">Plugins Reference</a>



			<li><a href="/releases/4.1.0/chapters/880-settings.html">Settings</a>



			<li><a href="/releases/4.1.0/chapters/900-errors.html">Errors</a>



			<li><a href="/releases/4.1.0/chapters/910-warnings.html">Warnings</a>



			<li><a href="/releases/4.1.0/chapters/920-faq.html">Frequently Asked Questions</a>


</ul>

			</div>

		<li span=9>
			<div class=notes-margin>
				<h1> Provide-Capability  ::= capability (',' capability )*</h1>
				<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="k">Parameters</span> <span class="n">capabilities</span> <span class="p">=</span> <span class="n">new</span> <span class="k">Parameters</span><span class="p">(</span><span class="n">annotationHeaders</span><span class="p">.</span><span class="n">getHeader</span><span class="p">(</span><span class="n">PROVIDE_CAPABILITY</span><span class="p">));</span>


	<span class="p">/*</span>
 <span class="p">*</span> <span class="n">Provide</span><span class="p">-</span><span class="n">Capability</span> <span class="n">header</span>
 <span class="p">*/</span>
<span class="n">private</span> <span class="n">void</span> <span class="n">doProvideCapability</span><span class="p">(</span><span class="n">ProvideCapability</span> <span class="n">annotation</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="n">new</span> <span class="n">StringBuilder</span><span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">ns</span><span class="p">());</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">name</span><span class="p">()</span> <span class="c1">!= null)
</span>		<span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">";"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">ns</span><span class="p">()).</span><span class="n">append</span><span class="p">(</span><span class="s2">"='"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">name</span><span class="p">()).</span><span class="n">append</span><span class="p">(</span><span class="s2">"'"</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="k">uses</span><span class="p">()</span> <span class="c1">!= null)
</span>		<span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">";"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="s2">"uses:='"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">Strings</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="n">annotation</span><span class="p">.</span><span class="k">uses</span><span class="p">())).</span><span class="n">append</span><span class="p">(</span><span class="s2">"'"</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">mandatory</span><span class="p">()</span> <span class="c1">!= null)
</span>		<span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">";"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="s2">"mandatory:='"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">Strings</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="n">annotation</span><span class="p">.</span><span class="n">mandatory</span><span class="p">())).</span><span class="n">append</span><span class="p">(</span><span class="s2">"'"</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="k">version</span><span class="p">()</span> <span class="c1">!= null)
</span>		<span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">";"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="s2">"version:Version='"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="k">version</span><span class="p">()).</span><span class="n">append</span><span class="p">(</span><span class="s2">"'"</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="c1">!= null)
</span>		<span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">";"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">value</span><span class="p">());</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">effective</span><span class="p">()</span> <span class="c1">!= null)
</span>		<span class="n">sb</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">";effective:='"</span><span class="p">).</span><span class="n">append</span><span class="p">(</span><span class="n">annotation</span><span class="p">.</span><span class="n">effective</span><span class="p">()).</span><span class="n">append</span><span class="p">(</span><span class="s2">"'"</span><span class="p">);</span>

	<span class="n">add</span><span class="p">(</span><span class="n">Constants</span><span class="p">.</span><span class="n">PROVIDE_CAPABILITY</span><span class="p">,</span> <span class="n">sb</span><span class="p">.</span><span class="n">toString</span><span class="p">());</span>
<span class="p">}</span>




		<span class="k">package</span> <span class="n">aQute</span><span class="p">.</span><span class="n">bnd</span><span class="p">.</span><span class="n">annotation</span><span class="p">.</span><span class="n">headers</span><span class="p">;</span>

	<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">lang</span><span class="p">.</span><span class="n">annotation</span><span class="p">.*;</span>

	<span class="p">/**</span>
	 <span class="p">*</span> <span class="n">Define</span> <span class="n">a</span> <span class="n">Provide</span> <span class="n">Capability</span> <span class="n">clause</span> <span class="k">in</span> <span class="n">the</span> <span class="n">manifest</span><span class="p">.</span>
	 <span class="p">*</span> <span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span>
	 <span class="p">*</span> <span class="n">Since</span> <span class="n">this</span> <span class="n">annotation</span> <span class="n">can</span> <span class="n">only</span> <span class="n">be</span> <span class="n">applied</span> <span class="n">once</span><span class="p">,</span> <span class="n">it</span> <span class="n">is</span> <span class="n">possible</span> <span class="k">to</span> <span class="nb">create</span> <span class="n">an</span> <span class="n">annotation</span>
	 <span class="p">*</span> <span class="n">that</span> <span class="n">models</span> <span class="n">a</span> <span class="n">specific</span> <span class="n">capability</span><span class="p">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">:</span>
	 <span class="p">*</span> <span class="p">&lt;</span><span class="n">pre</span><span class="p">&gt;</span>
	 <span class="p">*</span> <span class="n">interface</span> <span class="n">Webserver</span> <span class="p">{</span>
	 <span class="p">*</span> 		<span class="p">@</span><span class="n">ProvideCapability</span><span class="p">(</span><span class="n">ns</span><span class="p">=</span><span class="s2">"osgi.extender"</span><span class="p">,</span> <span class="n">name</span><span class="p">=</span><span class="s2">"aQute.webserver"</span><span class="p">,</span> <span class="k">version</span> <span class="p">=</span> <span class="s2">"${@version}"</span><span class="p">)</span>
	 <span class="p">*</span> 	 	<span class="p">@</span><span class="n">interface</span> <span class="n">Provide</span> <span class="p">{}</span>
	 <span class="p">*</span>
	 <span class="p">*</span> 		<span class="p">@</span><span class="n">RequireCapability</span><span class="p">(</span><span class="n">ns</span><span class="p">=</span><span class="s2">"osgi.extender"</span><span class="p">,</span> <span class="n">filter</span><span class="p">=</span><span class="s2">"(&amp;(osgi.extender=aQute.webserver)${frange;${@version}})"</span><span class="p">)</span>
	 <span class="p">*</span> 	 	<span class="p">@</span><span class="n">interface</span> <span class="n">Require</span> <span class="p">{}</span>
	 <span class="p">*</span> <span class="p">}</span>
	 <span class="p">*</span>
	 <span class="p">*</span> <span class="n">Webserver</span><span class="p">.@</span><span class="n">Provide</span>
	 <span class="p">*</span> <span class="k">public</span> <span class="n">class</span> <span class="n">MyWebserver</span> <span class="p">{</span>
	 <span class="p">*</span> <span class="p">}</span>
	 <span class="p">*</span> <span class="p">&lt;/</span><span class="n">pre</span><span class="p">&gt;</span>
	 <span class="p">*</span>
	 <span class="p">*/</span>
	<span class="p">@</span><span class="n">Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="n">CLASS</span><span class="p">)</span>
	<span class="p">@</span><span class="n">Target</span><span class="p">({</span>
			<span class="n">ElementType</span><span class="p">.</span><span class="n">ANNOTATION_TYPE</span><span class="p">,</span> <span class="n">ElementType</span><span class="p">.</span><span class="n">TYPE</span>
	<span class="p">})</span>
	<span class="k">public</span> <span class="p">@</span><span class="n">interface</span> <span class="n">ProvideCapability</span> <span class="p">{</span>
		<span class="p">/**</span>
		 <span class="p">*</span> <span class="n">Appended</span> <span class="n">at</span> <span class="n">the</span> <span class="k">end</span> <span class="k">of</span> <span class="n">the</span> <span class="n">clause</span> <span class="p">(</span><span class="n">after</span> <span class="n">a</span> <span class="s1">';'</span><span class="p">).</span> <span class="n">Can</span> <span class="n">be</span> <span class="n">used</span> <span class="k">to</span> <span class="n">add</span>
		 <span class="p">*</span> <span class="n">additional</span> <span class="n">attributes</span> <span class="k">and</span> <span class="n">directives</span><span class="p">.</span>
		 <span class="p">*/</span>
		<span class="k">String</span> <span class="n">value</span><span class="p">()</span> <span class="n">default</span> <span class="s2">""</span><span class="p">;</span>

		<span class="p">/**</span>
		 <span class="p">*</span> <span class="n">The</span> <span class="n">capability</span> <span class="n">namespace</span><span class="p">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">:</span> <span class="p">{@</span><span class="n">code</span> <span class="n">osgi</span><span class="p">.</span><span class="n">contract</span><span class="p">}.</span>
		 <span class="p">*/</span>
		<span class="k">String</span> <span class="n">ns</span><span class="p">();</span>

		<span class="p">/**</span>
		 <span class="p">*</span> <span class="n">The</span> <span class="n">name</span> <span class="k">of</span> <span class="n">the</span> <span class="n">capability</span><span class="p">.</span> <span class="k">If</span> <span class="n">this</span> <span class="n">is</span> <span class="k">set</span><span class="p">,</span> <span class="n">a</span> <span class="n">property</span> <span class="n">will</span> <span class="n">be</span> <span class="n">added</span> <span class="k">as</span>
		 <span class="p">*</span> <span class="p">{</span><span class="n">ns</span><span class="p">}={</span><span class="n">name</span><span class="p">}.</span> <span class="n">This</span> <span class="n">is</span> <span class="n">the</span> <span class="n">custom</span> <span class="n">pattern</span> <span class="n">for</span> <span class="n">OSGi</span> <span class="n">namespaces</span><span class="p">.</span> <span class="n">Leaving</span> <span class="n">this</span>
		 <span class="p">*</span> <span class="n">unfilled</span><span class="p">,</span> <span class="n">requires</span> <span class="n">the</span> <span class="p">{@</span><span class="n">link</span> <span class="p">#</span><span class="n">value</span><span class="p">()}</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">name</span> <span class="k">of</span>
		 <span class="p">*</span> <span class="n">the</span> <span class="n">capability</span><span class="p">,</span> <span class="k">if</span> <span class="n">needed</span><span class="p">.</span> <span class="n">For</span> <span class="n">example</span> <span class="p">{@</span><span class="n">code</span> <span class="n">aQute</span><span class="p">.</span><span class="n">sse</span><span class="p">}.</span>
		 <span class="p">*/</span>
		<span class="k">String</span> <span class="n">name</span><span class="p">()</span> <span class="n">default</span> <span class="s2">""</span><span class="p">;</span>

		<span class="p">/**</span>
		 <span class="p">*</span> <span class="n">The</span> <span class="k">version</span> <span class="k">of</span> <span class="n">the</span> <span class="n">capability</span><span class="p">.</span> <span class="n">This</span> <span class="n">must</span> <span class="n">be</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">OSGi</span> <span class="k">version</span><span class="p">.</span>
		 <span class="p">*/</span>
		<span class="k">String</span> <span class="k">version</span><span class="p">()</span> <span class="n">default</span> <span class="s2">""</span><span class="p">;</span>

		<span class="p">/**</span>
		 <span class="p">*</span> <span class="n">Effective</span> <span class="n">time</span><span class="p">.</span> <span class="n">Specifies</span> <span class="n">the</span> <span class="n">time</span> <span class="n">a</span> <span class="n">capability</span> <span class="n">is</span> <span class="n">available</span><span class="p">,</span> <span class="n">either</span>
		 <span class="p">*</span> <span class="n">resolve</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span> <span class="k">or</span> <span class="n">another</span> <span class="n">name</span><span class="p">.</span> <span class="n">The</span> <span class="n">OSGi</span> <span class="n">framework</span> <span class="n">resolver</span> <span class="n">only</span>
		 <span class="p">*</span> <span class="n">considers</span> <span class="n">Capabilities</span> <span class="n">without</span> <span class="n">an</span> <span class="n">effective</span> <span class="n">directive</span> <span class="k">or</span>
		 <span class="p">*</span> <span class="n">effective</span><span class="p">:=</span><span class="n">resolve</span><span class="p">.</span> <span class="n">Capabilities</span> <span class="k">with</span> <span class="n">other</span> <span class="n">values</span> <span class="n">for</span> <span class="n">the</span> <span class="n">effective</span>
		 <span class="p">*</span> <span class="n">directive</span> <span class="n">can</span> <span class="n">be</span> <span class="n">considered</span> <span class="n">by</span> <span class="n">an</span> <span class="n">external</span> <span class="n">agent</span><span class="p">.</span>
		 <span class="p">*/</span>
		<span class="k">String</span> <span class="n">effective</span><span class="p">()</span> <span class="n">default</span> <span class="s2">"resolve"</span><span class="p">;</span>

		<span class="p">/**</span>
		 <span class="p">*</span> <span class="n">The</span> <span class="k">uses</span> <span class="n">directive</span> <span class="n">lists</span> <span class="k">package</span> <span class="n">names</span> <span class="n">that</span> <span class="n">are</span> <span class="n">used</span> <span class="n">by</span> <span class="n">this</span> <span class="n">Capability</span><span class="p">.</span>
		 <span class="p">*</span> <span class="n">This</span> <span class="n">information</span> <span class="n">is</span> <span class="n">intended</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="n">for</span> <span class="p">&lt;</span><span class="n">em</span><span class="p">&gt;</span><span class="k">uses</span> <span class="n">constraints</span><span class="p">&lt;/</span><span class="n">em</span><span class="p">&gt;,</span>
		 <span class="p">*/</span>
		<span class="k">String</span><span class="p">[]</span> <span class="k">uses</span><span class="p">()</span> <span class="n">default</span> <span class="p">{};</span>

		<span class="p">/**</span>
		 <span class="p">*</span> <span class="n">Mandatory</span> <span class="n">attributes</span><span class="p">.</span> <span class="n">Forces</span> <span class="n">the</span> <span class="n">resolver</span> <span class="k">to</span> <span class="n">only</span> <span class="n">satisfy</span> <span class="n">filters</span> <span class="n">that</span>
		 <span class="p">*</span> <span class="n">refer</span> <span class="k">to</span> <span class="n">all</span> <span class="n">listed</span> <span class="n">attributes</span><span class="p">.</span>
		 <span class="p">*/</span>
		<span class="k">String</span><span class="p">[]</span> <span class="n">mandatory</span><span class="p">()</span> <span class="n">default</span> <span class="p">{};</span>
	<span class="p">}</span>



				<span class="n">verifyDirectives</span><span class="p">(</span><span class="n">Constants</span><span class="p">.</span><span class="n">PROVIDE_CAPABILITY</span><span class="p">,</span> <span class="s2">"effective:|uses:"</span><span class="p">,</span> <span class="n">null</span><span class="p">,</span> <span class="n">null</span><span class="p">);</span>




		<span class="n">private</span> <span class="n">void</span> <span class="n">verifyCapabilities</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">Parameters</span> <span class="n">map</span> <span class="p">=</span> <span class="n">parseHeader</span><span class="p">(</span><span class="n">manifest</span><span class="p">.</span><span class="n">getMainAttributes</span><span class="p">().</span><span class="nf">getValue</span><span class="p">(</span><span class="n">Constants</span><span class="p">.</span><span class="n">PROVIDE_CAPABILITY</span><span class="p">));</span>
	<span class="n">for</span> <span class="p">(</span><span class="k">String</span> <span class="n">key</span> <span class="p">:</span> <span class="n">map</span><span class="p">.</span><span class="n">keySet</span><span class="p">())</span> <span class="p">{</span>
		<span class="n">Attrs</span> <span class="n">attrs</span> <span class="p">=</span> <span class="n">map</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
		<span class="n">verify</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">"cardinality:"</span><span class="p">,</span> <span class="n">CARDINALITY_PATTERN</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="s2">"Requirement %s cardinality not correct"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
		<span class="n">verify</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">"resolution:"</span><span class="p">,</span> <span class="n">RESOLUTION_PATTERN</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="s2">"Requirement %s resolution not correct"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">"osgi.extender"</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">verify</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">"osgi.extender"</span><span class="p">,</span> <span class="n">SYMBOLICNAME</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span>
					<span class="s2">"Extender %s must always have the osgi.extender attribute set"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
			<span class="n">verify</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">"version"</span><span class="p">,</span> <span class="k">VERSION</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="s2">"Extender %s must always have a version"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">"osgi.serviceloader"</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">verify</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">"register:"</span><span class="p">,</span> <span class="n">PACKAGEPATTERN</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span>
					<span class="s2">"Service Loader extender register: directive not a fully qualified Java name"</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">"osgi.contract"</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">verify</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">"osgi.contract"</span><span class="p">,</span> <span class="n">SYMBOLICNAME</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span>
					<span class="s2">"Contracts %s must always have the osgi.contract attribute set"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>

		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">"osgi.service"</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">verify</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="s2">"objectClass"</span><span class="p">,</span> <span class="n">MULTIPACKAGEPATTERN</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span>
					<span class="s2">"osgi.service %s must have the objectClass attribute set"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>

		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">"osgi.ee"</span><span class="p">))</span> <span class="p">{</span>
			<span class="p">//</span> <span class="n">TODO</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="s2">"osgi.wiring."</span><span class="p">)</span> <span class="p">||</span> <span class="n">key</span><span class="p">.</span><span class="nf">startsWith</span><span class="p">(</span><span class="s2">"osgi.identity"</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">error</span><span class="p">(</span><span class="s2">"osgi.wiring.* namespaces must not be specified with generic requirements/capabilities"</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="n">verifyAttrs</span><span class="p">(</span><span class="n">attrs</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">attrs</span><span class="p">.</span><span class="n">containsKey</span><span class="p">(</span><span class="s2">"filter:"</span><span class="p">))</span>
			<span class="n">error</span><span class="p">(</span><span class="s2">"filter: directive is intended for Requirements, not Capability %s"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">attrs</span><span class="p">.</span><span class="n">containsKey</span><span class="p">(</span><span class="s2">"cardinality:"</span><span class="p">))</span>
			<span class="n">error</span><span class="p">(</span><span class="s2">"cardinality: directive is intended for Requirements, not Capability %s"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">attrs</span><span class="p">.</span><span class="n">containsKey</span><span class="p">(</span><span class="s2">"resolution:"</span><span class="p">))</span>
			<span class="n">error</span><span class="p">(</span><span class="s2">"resolution: directive is intended for Requirements, not Capability %s"</span><span class="p">,</span> <span class="n">key</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>


			</div>
	</ul>


<nav class=next-prev>
	<a href='/releases/4.1.0/heads/private_package.html'></a> <a href='/releases/4.1.0/heads/require_bundle.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=3>
			<ul>
				<li><a href="/releases/4.1.0/contact.html">Contact</a>
			</ul>
		<li span=3>
			<ul>
				<li><a href="/releases/4.1.0/">Developers</a>
			</ul>
		<li span=3>
			<ul>
				<li><a href="/releases/4.1.0/">More</a>
			</ul>
	</ul>
</footer>

</body>
</html>
