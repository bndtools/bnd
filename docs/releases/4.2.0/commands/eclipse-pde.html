<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/4.2.0/css/style.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>eclipse pde [options] &lt;[repo-dir]&gt; &lt;[…]&gt;</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="eclipse pde [options] &lt;[repo-dir]&gt; &lt;[…]&gt;" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="THIS IS WORK IN PROGRESS" />
<meta property="og:description" content="THIS IS WORK IN PROGRESS" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-10-12T19:48:23-04:00" />
<script type="application/ld+json">
{"headline":"eclipse pde [options] &lt;[repo-dir]&gt; &lt;[…]&gt;","dateModified":"2019-10-12T19:48:23-04:00","datePublished":"2019-10-12T19:48:23-04:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/releases/4.2.0/commands/eclipse-pde.html"},"url":"/releases/4.2.0/commands/eclipse-pde.html","description":"THIS IS WORK IN PROGRESS","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->




































































</head>


<body>


<ul class="container12 menu-bar">
	<li span=11><a class=menu-link href="/releases/4.2.0/"><img
			class=menu-logo src='/releases/4.2.0/img/bnd-80x40-white.png'></a>
			<a href="/releases/4.2.0/chapters/110-introduction.html">Intro
			</a><a href="/releases/4.2.0/chapters/800-headers.html">Headers
			</a><a href="/releases/4.2.0/chapters/825-instructions-ref.html">Instructions
			</a><a href="/releases/4.2.0/chapters/855-macros-ref.html">Macros
			</a><a href="/releases/4.2.0/chapters/400-commands.html">Commands
			</a><div class="releases"><button class="dropbtn">4.2.0</button><div class="dropdown-content"></div></div>

	<li class=menu-link span=1>
			<a href="https://github.com/bndtools/bnd" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</ul>




	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">


			<li><a href="/releases/4.2.0/chapters/110-introduction.html">Introduction</a>



			<li><a href="/releases/4.2.0/chapters/120-install.html">How to install bnd</a>



			<li><a href="/releases/4.2.0/chapters/123-tour-workspace.html">Guided Tour</a>



			<li><a href="/releases/4.2.0/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>



			<li><a href="/releases/4.2.0/chapters/130-concepts.html">Concepts</a>



			<li><a href="/releases/4.2.0/chapters/140-best-practices.html">Best practices</a>



			<li><a href="/releases/4.2.0/chapters/150-build.html">Build</a>



			<li><a href="/releases/4.2.0/chapters/160-jars.html">Generating JARs</a>



			<li><a href="/releases/4.2.0/chapters/170-versioning.html">Versioning</a>



			<li><a href="/releases/4.2.0/chapters/180-baselining.html">Baselining</a>



			<li><a href="/releases/4.2.0/chapters/200-components.html">Service Components</a>



			<li><a href="/releases/4.2.0/chapters/210-metatype.html">Metatype</a>



			<li><a href="/releases/4.2.0/chapters/220-contracts.html">Contracts</a>



			<li><a href="/releases/4.2.0/chapters/230-manifest-annotations.html">Manifest Annotations</a>



			<li><a href="/releases/4.2.0/chapters/250-resolving.html">Resolving Dependencies</a>



			<li><a href="/releases/4.2.0/chapters/300-launching.html">Launching</a>



			<li><a href="/releases/4.2.0/chapters/305-Junit-Testing-OSGi.html">Plain JUnit Testing with OSGi (PRELIMENARY)</a>



			<li><a href="/releases/4.2.0/chapters/310-testing.html">Testing</a>



			<li><a href="/releases/4.2.0/chapters/320-packaging.html">Packaging Applications</a>



			<li><a href="/releases/4.2.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>



			<li><a href="/releases/4.2.0/chapters/400-commands.html">Commands</a>



			<li><a href="/releases/4.2.0/chapters/600-developer.html">For Developers</a>



			<li><a href="/releases/4.2.0/chapters/700-tools.html">Tools bound to bnd</a>



			<li><a href="/releases/4.2.0/chapters/800-headers.html">Headers</a>



			<li><a href="/releases/4.2.0/chapters/820-instructions.html">Instruction Reference</a>



			<li><a href="/releases/4.2.0/chapters/825-instructions-ref.html">Instruction Index</a>



			<li><a href="/releases/4.2.0/chapters/850-macros.html">Macro Reference</a>



			<li><a href="/releases/4.2.0/chapters/855-macros-ref.html">Macro Index</a>



			<li><a href="/releases/4.2.0/chapters/870-plugins.html">Plugins</a>



			<li><a href="/releases/4.2.0/chapters/880-settings.html">Settings</a>



			<li><a href="/releases/4.2.0/chapters/900-errors.html">Errors</a>



			<li><a href="/releases/4.2.0/chapters/910-warnings.html">Warnings</a>



			<li><a href="/releases/4.2.0/chapters/920-faq.html">Frequently Asked Questions</a>


</ul>

			</div>

		<li span=9>
			<div class=notes-margin>
				<h1> eclipse pde [options] <[repo-dir]> <[...]></h1>
				<p><em>THIS IS WORK IN PROGRESS</em></p>

<h2 id="description">Description</h2>

<p>Import PDE projects into a bnd workspace</p>

<p>The control file (-i) has the following properties:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pde.selection = \
    com.example.extension.diagnostic, \
    com.example.security.foo.*; \
    com.example.osgi.*; \
        -workingset=sample, \
    com.example.bar; \
	-buildpath="org.apache.commons.lang,com.google.gson;version=3", \
</code></pre></div></div>

<p>The structure is a normal OSGi Parameters, where they keys of clauses can be connected. Keys can be globbed. This will match the directory of a directory that is a PDE project as signalled by a build.properties file. Notice that you can specify multiple directory globs for one clause.</p>

<p>The attributes/directives of a clause provide information that is added to the bnd file before analysis.</p>

<p>Although this format is quite powerful it is very error prone. Check your commas and semi-colons, especially when multiple entries on the -buildpath or -testpath are specified.</p>

<h3 id="working">Working</h3>

<p>The pde command will process the PDE repository directories and scan for PDE projects. A PDE project is a directory that has a <code class="highlighter-rouge">build.properties</code> file. It will then match the directory name against one of the keys in the <code class="highlighter-rouge">pde.selection</code> property of the control file. If this matches, it will convert the project.</p>

<p>It will first parse the manifest to establish the bundle symbolic name. It will then create a bnd project in the provided workspace with the symbolic name. It will use the workspace settings for the workspace as defined by the following properties:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src:                    source directory, e.g. src/main/java
src.resources:          resources directory, e.g. src/main/resources
bin:                    output directory main, e.g. target/classes
testsrc:                test source (singular!), e.g. src/test/java
testsrc.resources:      test resources, e.g. src/test/resources
testbin:                test outout, e.g. target/test-classes
target-dir:             general write directory, e.g. target
</code></pre></div></div>

<p>It will use the information in the build.properties file to copy these different aspects of a PDE project to the place in a bnd project. If the control file specifies attributes for the given project, then they are added to the bnd.bnd file. The bnd file will be fully setup for Eclipse with a proper .classpath and .project files. Any natures and build command other than bnd, e.g. Groovy, are copied.</p>

<p>After all selected PDE projects are converted, bnd will analyze the newly created projects. It will scan the source code and detect most dependencies. It will then try to find an exporter in either another bnd project in the same workspace or through one of the workspace’s repositories. This is done seperately for both the main aspect of the project (-buildpath) as well as the test aspect (-testpath).</p>

<p>Although it is a very decent start, this analysis is not perfect</p>

<ul>
  <li>The workspace/repository can have multiple resources with different version. In that case the latest version is selected. (Otherwise no version is specified which defaults to the lowest available version for the build and highest for the test.)</li>
  <li>Dependencies not imported in the Java file are not detected. This happens when you get an object of a non imported type but directly call a method on it.</li>
</ul>

<h2 id="synopsis">Synopsis</h2>

<h2 id="options">Options</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-w, --workspace &lt;dir&gt;           - The bnd workspace directory
-c, --clean                     - Clean the project directory before converting
-s, --set                       - Set Eclipse workingset
-i, --instructions &lt;file.bnd&gt;*  - Control file what to convert and augment
-r, --recurse                   - Show references to other classes/packages (&gt;)
</code></pre></div></div>

<h2 id="example">Example</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bnd eclipse pde
	-c
	-w com.example.bnd.workspace
	-s example.workingset
	-i control.bnd
	-r git_repo
</code></pre></div></div>

			</div>
	</ul>


<nav class=next-prev>
	<a href='/releases/4.2.0/commands/do.html'></a> <a href='/releases/4.2.0/commands/eclipse.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/releases/4.2.0/">GitHub</a>
			</ul>
	</ul>
</footer>

</body>
</html>
