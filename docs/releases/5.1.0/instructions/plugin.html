<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/5.1.0/css/style.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>-plugin.* plugin-def ( ‘,’ plugin-def )*</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="-plugin.* plugin-def ( ‘,’ plugin-def )*" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A plugin is a parameterized piece of code that runs inside bndlib. The -plugin instruction defines a plugin by specifying its class name and a given set of parameters; a specific class can be instantiated multiple times." />
<meta property="og:description" content="A plugin is a parameterized piece of code that runs inside bndlib. The -plugin instruction defines a plugin by specifying its class name and a given set of parameters; a specific class can be instantiated multiple times." />
<script type="application/ld+json">
{"url":"/releases/5.1.0/instructions/plugin.html","headline":"-plugin.* plugin-def ( ‘,’ plugin-def )*","description":"A plugin is a parameterized piece of code that runs inside bndlib. The -plugin instruction defines a plugin by specifying its class name and a given set of parameters; a specific class can be instantiated multiple times.","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

</head>


<body>

	
<ul class="container12 menu-bar">
	<li span=11><a class=menu-link href="/releases/5.1.0/"><img
			class=menu-logo src="/releases/5.1.0/img/bnd-80x40-white.png"></a>
			<a href="/releases/5.1.0/chapters/110-introduction.html">Intro
			</a><a href="/releases/5.1.0/chapters/800-headers.html">Headers
			</a><a href="/releases/5.1.0/chapters/825-instructions-ref.html">Instructions
			</a><a href="/releases/5.1.0/chapters/855-macros-ref.html">Macros
			</a><a href="/releases/5.1.0/chapters/400-commands.html">Commands
			</a><div class="releases"><button class="dropbtn">5.1.0</button><div class="dropdown-content"></div></div>
	<li class=menu-link span=1>
			<a href="https://github.com/bndtools/bnd" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</ul>


					

	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">
	
		
			<li><a href="/releases/5.1.0/chapters/110-introduction.html">Introduction</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/120-install.html">How to install bnd</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/123-tour-workspace.html">Guided Tour</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/130-concepts.html">Concepts</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/140-best-practices.html">Best practices</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/150-build.html">Build</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/155-project-setup.html">Project Setup</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/160-jars.html">Generating JARs</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/170-versioning.html">Versioning</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/180-baselining.html">Baselining</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/200-components.html">Service Components</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/210-metatype.html">Metatype</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/220-contracts.html">Contracts</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/230-manifest-annotations.html">Bundle Annotations</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/235-accessor-properties.html">Accessor Properties</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/240-spi-annotations.html">SPI Annotations</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/250-resolving.html">Resolving Dependencies</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/300-launching.html">Launching</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/305-startlevels.html">Startlevels</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/310-testing.html">Testing</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/315-launchpad-testing.html">Testing with Launchpad</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/320-packaging.html">Packaging Applications</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/330-jpms.html">JPMS Libraries</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/395-generating-documentation.html">Generating Documentation</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/400-commands.html">Commands</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/600-developer.html">For Developers</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/650-windows.html">Tips for Windows users</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/700-tools.html">Tools bound to bnd</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/800-headers.html">Headers</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/820-instructions.html">Instruction Reference</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/825-instructions-ref.html">Instruction Index</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/850-macros.html">Macro Reference</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/855-macros-ref.html">Macro Index</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/870-plugins.html">Plugins</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/875-external-plugins.html">External Plugins</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/880-settings.html">Settings</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/900-errors.html">Errors</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/910-warnings.html">Warnings</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/920-faq.html">Frequently Asked Questions</a>
	  	
  	
</ul>

			</div>
			
		<li span=9>
			<div class=notes-margin>
				<h1> -plugin.* plugin-def ( ',' plugin-def )*</h1>
				<p>A plugin is a parameterized piece of code that runs inside bndlib. The <code class="highlighter-rouge">-plugin</code> instruction defines a plugin by specifying its class name and a given set of parameters; a specific class can be instantiated multiple times.</p>

<p>The <code class="highlighter-rouge">-plugin</code> instruction actually aggregates all properties that start with <code class="highlighter-rouge">-plugin*</code>. This makes it possible to set plugins in different places, for example include files or with the bndlib workspace extensions. The following sets the Git plugin:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-plugin.git = aQute.bnd.plugin.git.GitPlugin
</code></pre></div></div>

<p>Plugins are created at startup using a special <em>plugin class loader</em>. This class loader is pre-loaded with any URLs set in the <code class="highlighter-rouge">-pluginpath</code> instructions. The plugin definition can, however, also add additional URLs to this classloader with the ‘path:’ directive.</p>

<p>If the plugin implements the <code class="highlighter-rouge">Plugin</code> interface, it is given the parameters specified in the <code class="highlighter-rouge">-plugin</code> instruction. It is then registered in the <em>plugin registry</em> and made available to the rest of the system.</p>

<p>All plugins are (unfortunately) loaded in a single class loader.</p>

<h2 id="syntax">Syntax</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-plugin*       ::= plugin-def ( ',' plugin-def )*
plugin-def     ::= qname ( ';' ( attribute | directive ) )*
</code></pre></div></div>

<p>Any attributes are passed to the plugin if it implements the <code class="highlighter-rouge">aQute.bnd.servce.Plugin</code> interface. Consult the actual plugin for the possible attributes.</p>

<p>The following directives are architected.</p>

<ul>
  <li><code class="highlighter-rouge">path:</code> – This directive specifies a comma separated list of file paths, the list must be enclosed in quotes when it contains a comma. Each of these files must be a directory or a JAR file and is added to the plugin class loader in the given sequence.</li>
  <li><code class="highlighter-rouge">command:</code> – If this directive is specified errors on initializing this plugin are only reported if this command is an instruction in the current properties. The purpose of this is to allow plugins to be built in the <code class="highlighter-rouge">cnf</code> directory; since the plugin does not exist during its first compilation errors would be reported. Since this project does not use the command itself, it can safely ignore this error.</li>
</ul>

<h2 id="typical-example">Typical Example</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-plugin.repo.main:\
  aQute.lib.deployer.FileRepo; \
  	name='Main'; \
  	location=${build}/repo/main
</code></pre></div></div>

<h2 id="errors--warnings">Errors &amp; Warnings</h2>

<ul>
  <li><code class="highlighter-rouge">Problem adding path &lt;path&gt; to loader for plugin &lt;key&gt;. Exception: (&lt;e&gt;)</code> – An unexpected exceptio occurred while adding a new path to the plugin class loader.</li>
  <li><code class="highlighter-rouge">Cannot load the plugin &lt;class-name&gt;</code> – The give plugin cannot be loaded for an unknown reason.</li>
  <li><code class="highlighter-rouge">Failed to load plugin &lt;class-name&gt;;&lt;attrs&gt;, error: &lt;e&gt;</code> – An exception occurred trying to add a new plugin.</li>
  <li><code class="highlighter-rouge">While setting properties &lt;properties&gt; on plugin &lt;plugin&gt;, &lt;e&gt;</code> – An exception was thrown by the plugin when receiving its properties.</li>
  <li><code class="highlighter-rouge">Plugin path: &lt;path&gt;, specified url &lt;url&gt; and a sha1 but the file does not match the sha</code> – The <code class="highlighter-rouge">-pluginpath.*</code> instruction specified a download URL and a SHA digest; the file was downloaded but the content did not match the given SHA digest.</li>
  <li><code class="highlighter-rouge">Plugin path: &lt;path&gt;, specified url &lt;url&gt; and a sha1 '&lt;sha&gt;' but this is not a hexadecimal</code> – The SHA is not in hexadecimal form.</li>
  <li><code class="highlighter-rouge">No such file &lt;path&gt; from &lt;plugin&gt; and no 'url' attribute on the path so it can be downloaded</code> – The given path in <code class="highlighter-rouge">pluginpath*</code> was not found and there was no <code class="highlighter-rouge">url</code> attribute specified to download it from.</li>
</ul>

<h2 id="links">Links</h2>

<ul>
  <li><code class="highlighter-rouge">-pluginpath</code> – Specifies JARs that populat the plugin class loader</li>
  <li><code class="highlighter-rouge">-extensions</code> – An alternative mechanism that can load plugins from repositories</li>
</ul>

<h2 id="caveats">Caveats</h2>

<ul>
  <li>Use OSGi as the plugin system, it is kind of embarrassing that we have a poor mans plugin system when doing OSGi things. The reason is that bnd was started in 1999 and at that time OSGi was too slow and big to start/stop as often as it is done in bndlib user’s environment. Alas …</li>
</ul>


			</div>
	</ul>

	
<nav class=next-prev>
	<a href='/releases/5.1.0/instructions/pedantic.html'></a> <a href='/releases/5.1.0/instructions/pluginpath.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/releases/5.1.0/">GitHub</a>
			</ul>
	</ul>
</footer>

</body>
</html>
