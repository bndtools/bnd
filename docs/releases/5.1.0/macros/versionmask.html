<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/5.1.0/css/style.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>versionmask MASK VERSION?</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="versionmask MASK VERSION?" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The versionmask macro takes a template (MASK) and a version. It then uses the template to modify the version. This is useful to get rid of parts of the version. For example, to get rid of the qualifier the following macro is useful:" />
<meta property="og:description" content="The versionmask macro takes a template (MASK) and a version. It then uses the template to modify the version. This is useful to get rid of parts of the version. For example, to get rid of the qualifier the following macro is useful:" />
<script type="application/ld+json">
{"url":"/releases/5.1.0/macros/versionmask.html","headline":"versionmask MASK VERSION?","description":"The versionmask macro takes a template (MASK) and a version. It then uses the template to modify the version. This is useful to get rid of parts of the version. For example, to get rid of the qualifier the following macro is useful:","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

</head>


<body>

	
<ul class="container12 menu-bar">
	<li span=11><a class=menu-link href="/releases/5.1.0/"><img
			class=menu-logo src="/releases/5.1.0/img/bnd-80x40-white.png"></a>
			<a href="/releases/5.1.0/chapters/110-introduction.html">Intro
			</a><a href="/releases/5.1.0/chapters/800-headers.html">Headers
			</a><a href="/releases/5.1.0/chapters/825-instructions-ref.html">Instructions
			</a><a href="/releases/5.1.0/chapters/855-macros-ref.html">Macros
			</a><a href="/releases/5.1.0/chapters/400-commands.html">Commands
			</a><div class="releases"><button class="dropbtn">5.1.0</button><div class="dropdown-content"></div></div>
	<li class=menu-link span=1>
			<a href="https://github.com/bndtools/bnd" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</ul>


					

	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">
	
		
			<li><a href="/releases/5.1.0/chapters/110-introduction.html">Introduction</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/120-install.html">How to install bnd</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/123-tour-workspace.html">Guided Tour</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/130-concepts.html">Concepts</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/140-best-practices.html">Best practices</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/150-build.html">Build</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/155-project-setup.html">Project Setup</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/160-jars.html">Generating JARs</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/170-versioning.html">Versioning</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/180-baselining.html">Baselining</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/200-components.html">Service Components</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/210-metatype.html">Metatype</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/220-contracts.html">Contracts</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/230-manifest-annotations.html">Bundle Annotations</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/235-accessor-properties.html">Accessor Properties</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/240-spi-annotations.html">SPI Annotations</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/250-resolving.html">Resolving Dependencies</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/300-launching.html">Launching</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/305-startlevels.html">Startlevels</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/310-testing.html">Testing</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/315-launchpad-testing.html">Testing with Launchpad</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/320-packaging.html">Packaging Applications</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/330-jpms.html">JPMS Libraries</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/395-generating-documentation.html">Generating Documentation</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/400-commands.html">Commands</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/600-developer.html">For Developers</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/650-windows.html">Tips for Windows users</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/700-tools.html">Tools bound to bnd</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/800-headers.html">Headers</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/820-instructions.html">Instruction Reference</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/825-instructions-ref.html">Instruction Index</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/850-macros.html">Macro Reference</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/855-macros-ref.html">Macro Index</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/870-plugins.html">Plugins</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/875-external-plugins.html">External Plugins</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/880-settings.html">Settings</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/900-errors.html">Errors</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/910-warnings.html">Warnings</a>
	  	
  	
		
			<li><a href="/releases/5.1.0/chapters/920-faq.html">Frequently Asked Questions</a>
	  	
  	
</ul>

			</div>
			
		<li span=9>
			<div class=notes-margin>
				<h1> versionmask MASK VERSION?</h1>
				<p>The <code class="highlighter-rouge">versionmask</code> macro takes a template (MASK) and a version. It then uses the template
to modify the version. This is useful to get rid of parts of the version. For example,
to get rid of the qualifier the following macro is useful:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>${versionmask;===;1.2.3.awfulqualifier} -&gt; 1.2.3
</code></pre></div></div>

<p>It is also possible to modify the template. For example, if the next minor version is
sought, then the following macro is useful:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>${versionmask;=+;1.2.3.awfulqualifier} -&gt; 1.3
</code></pre></div></div>

<p>The syntax for the <code class="highlighter-rouge">versionmask</code> macro is:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>versionmask ::= mask
mask  		::= m ( m ( m ( q )? )? )?
m     ::= [0-9=+-~]
q     ::= [0-9=~Ss]
</code></pre></div></div>

<p>The MASK can consists of 1 to 4 template characters. Each character maps to a <em>version
part</em>.The first character maps to the major, the second to the minor, the third to the
micro, and the last to the qualifier. These characters can be:</p>

<ul>
  <li><code class="highlighter-rouge">=</code> – Keep the version part</li>
  <li><code class="highlighter-rouge">-</code> – Decrement the version part</li>
  <li><code class="highlighter-rouge">+</code> – Increment the version part</li>
  <li><code class="highlighter-rouge">[0-9]</code> – Replace the version part</li>
  <li><code class="highlighter-rouge">~</code> – Ignore the version part</li>
  <li><code class="highlighter-rouge">S</code> – If the qualifier equals <code class="highlighter-rouge">SNAPSHOT</code> or ends with <code class="highlighter-rouge">-SNAPSHOT</code>, then the qualifier
will be ignored and the resulting version will be suffixed with <code class="highlighter-rouge">-SNAPSHOT</code>. This
results in a maven version which is not a valid OSGi version. Otherwise, the existing
qualifier, if any, will be kept. For example, <code class="highlighter-rouge">${versionmask;===S;1.2.3.SNAPSHOT}</code> will
return <code class="highlighter-rouge">1.2.3-SNAPSHOT</code> and <code class="highlighter-rouge">${versionmask;===S;1.2.3.QUAL}</code> will return <code class="highlighter-rouge">1.2.3.QUAL</code>.</li>
  <li><code class="highlighter-rouge">s</code> – If the qualifier equals <code class="highlighter-rouge">SNAPSHOT</code> or ends with <code class="highlighter-rouge">-SNAPSHOT</code>, then the qualifier
will be ignored and the resulting version will be suffixed with <code class="highlighter-rouge">-SNAPSHOT</code>. This
results in a maven version which is not a valid OSGi version. Otherwise, the existing
qualifier, if any, will be ignored. For example, <code class="highlighter-rouge">${versionmask;===s;1.2.3.SNAPSHOT}</code>
will return <code class="highlighter-rouge">1.2.3-SNAPSHOT</code> and <code class="highlighter-rouge">${versionmask;===s;1.2.3.QUAL}</code> will return <code class="highlighter-rouge">1.2.3</code>.</li>
</ul>

<p>In many places in bnd, the <code class="highlighter-rouge">${@}</code> macro is set as an implicit variable. For example, if
the bnd analyzer calculates the import range it sets this to the version of the package
that is imported. Therefore, if the version is not specified in this macro as the second
argument then the <code class="highlighter-rouge">${@}</code> macro is expanded and used as the value for the version. A use
of this is in the Import Package statement. There you can use the <code class="highlighter-rouge">${versionmask}</code> macro
to clean up the imported version. (Though the <a href="/macros/range.html">range</a> macro is better suited for
this.)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Import-Package com.exmaple.foo;version=${versionmask;==}
</code></pre></div></div>

<p>This macro is also available under the name <code class="highlighter-rouge">version</code>. The name was changed because this
often collided with macros that were defined by the user.</p>


			</div>
	</ul>

	
<nav class=next-prev>
	<a href='/releases/5.1.0/macros/version_cleanup.html'></a> <a href='/releases/5.1.0/macros/warning.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=12>
			<ul>
				<li><a href="/releases/5.1.0/">GitHub</a>
			</ul>
	</ul>
</footer>

</body>
</html>
