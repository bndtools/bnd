<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/releases/3.5.0/css/style.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/releases.js"></script>
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>For Developers</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="For Developers" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="API It is quite easy to use bnd from Java, you only need to include biz.aQute.bndlib on your class path. This chapter shows you some samples of how to use bndlib." />
<meta property="og:description" content="API It is quite easy to use bnd from Java, you only need to include biz.aQute.bndlib on your class path. This chapter shows you some samples of how to use bndlib." />
<script type="application/ld+json">
{"@type":"WebPage","url":"/releases/3.5.0/chapters/600-developer.html","headline":"For Developers","description":"API It is quite easy to use bnd from Java, you only need to include biz.aQute.bndlib on your class path. This chapter shows you some samples of how to use bndlib.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->













































		<style>
			 body {
				counter-reset: h1 22;
			}
		</style>




























</head>


<body>


<ul class="container12 menu-bar">
	<li span=11><a class=menu-link href="/releases/3.5.0/"><img
			class=menu-logo src='/releases/3.5.0/img/bnd-80x40-white.png'></a>
			<a href="/releases/3.5.0/chapters/110-introduction.html">Intro
			</a><a href="/releases/3.5.0/chapters/800-headers.html">Headers
			</a><a href="/releases/3.5.0/chapters/820-instructions.html">Instructions
			</a><a href="/releases/3.5.0/chapters/850-macros.html">Macros
			</a><div class="releases"><button class="dropbtn">3.5.0</button><div class="dropdown-content"></div></div>

	<li class=menu-link span=1>
			<a href="https://github.com/bndtools/bnd" target="_"><img
	style="position:absolute;top:0;right:0;margin:0;padding:0;z-index:100"
	src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
	alt="Fork me on GitHub"
	data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
</ul>




	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">


			<li><a href="/releases/3.5.0/chapters/100-release.html">Release</a>



			<li><a href="/releases/3.5.0/chapters/110-introduction.html">Introduction</a>



			<li><a href="/releases/3.5.0/chapters/120-install.html">How to install bnd</a>



			<li><a href="/releases/3.5.0/chapters/123-tour-workspace.html">Guided Tour</a>



			<li><a href="/releases/3.5.0/chapters/125-tour-features.html">Guided Tour Workspace & Projects</a>



			<li><a href="/releases/3.5.0/chapters/130-concepts.html">Concepts</a>



			<li><a href="/releases/3.5.0/chapters/140-best-practices.html">Best practices</a>



			<li><a href="/releases/3.5.0/chapters/150-build.html">Build</a>



			<li><a href="/releases/3.5.0/chapters/160-jars.html">Generating JARs</a>



			<li><a href="/releases/3.5.0/chapters/170-versioning.html">Versioning</a>



			<li><a href="/releases/3.5.0/chapters/180-baselining.html">Baselining</a>



			<li><a href="/releases/3.5.0/chapters/200-components.html">Service Components</a>



			<li><a href="/releases/3.5.0/chapters/210-metatype.html">Metatype</a>



			<li><a href="/releases/3.5.0/chapters/220-contracts.html">Contracts</a>



			<li><a href="/releases/3.5.0/chapters/230-manifest-annotations.html">Manifest Annotations</a>



			<li><a href="/releases/3.5.0/chapters/250-resolving.html">Resolving Dependencies</a>



			<li><a href="/releases/3.5.0/chapters/300-launching.html">Launching</a>



			<li><a href="/releases/3.5.0/chapters/310-testing.html">Testing</a>



			<li><a href="/releases/3.5.0/chapters/320-packaging.html">Packaging Applications</a>



			<li><a href="/releases/3.5.0/chapters/390-wrapping.html">Wrapping Libraries to OSGi Bundles</a>



			<li><a href="/releases/3.5.0/chapters/400-commandline.html">From the command line</a>



			<li class=selected>For Developers



			<li><a href="/releases/3.5.0/chapters/610-plugin.html">Plugins</a>



			<li><a href="/releases/3.5.0/chapters/700-tools.html">Tools bound to bnd</a>



			<li><a href="/releases/3.5.0/chapters/790-format.html">File Format</a>



			<li><a href="/releases/3.5.0/chapters/800-headers.html">Header Reference</a>



			<li><a href="/releases/3.5.0/chapters/820-instructions.html">Instruction</a>



			<li><a href="/releases/3.5.0/chapters/825-instructions-ref.html">Instruction Index</a>



			<li><a href="/releases/3.5.0/chapters/850-macros.html">Macro Reference</a>



			<li><a href="/releases/3.5.0/chapters/860-commands.html">Command Reference</a>



			<li><a href="/releases/3.5.0/chapters/870-plugins.html">Plugins Reference</a>



			<li><a href="/releases/3.5.0/chapters/880-settings.html">Settings</a>



			<li><a href="/releases/3.5.0/chapters/900-errors.html">Errors</a>



			<li><a href="/releases/3.5.0/chapters/910-warnings.html">Warnings</a>



			<li><a href="/releases/3.5.0/chapters/920-faq.html">Frequently Asked Questions</a>


</ul>

			<div class=enroute><a href="http://enroute.osgi.org">Supported by OSGi enRoute <img src="/releases/3.5.0/img/EnRouteIcon_CMYK.png"></a></div>
			</div>

		<li span=9>
			<div class=notes-margin>
				<h1> For Developers</h1>
				<h2 id="api">API</h2>
<p>It is quite easy to use bnd from Java, you only need to include biz.aQute.bndlib on your class path. This chapter shows you some samples of how to use bndlib.</p>

<h2 id="creating-a-manifest">Creating a Manifest</h2>
<p>By default, bnd creates a container with resources and then calculates the manifest. However, these phases are separated although they use the same instructions. The following snippet therefore shows how you can create a manifest from an existing file or directory.</p>

<p>Analyzer analyzer = new Analyzer();
  Jar bin = new Jar( new File(“bin”) );  // where our data is
  analyzer.setJar( bin );                // give bnd the contents</p>

<p>// You can provide additional class path entries to allow
  // bnd to pickup export version from the packageinfo file,
  // Version annotation, or their manifests.
  analyzer.addClasspath( new File(“jar/spring.jar”) );</p>

<p>analyzer.setProperty(“Bundle-SymbolicName”,”org.osgi.core”);
  analyzer.setProperty(“Export-Package”,
                       “org.osgi.framework,org.osgi.service.event”);
  analyzer.setProperty(“Bundle-Version”,”1.0”);</p>

<p>// There are no good defaults so make sure you set the
  // Import-Package
  analyzer.setProperty(“Import-Package”,”*”);</p>

<p>// Calculate the manifest
  Manifest manifest = analyzer.calcManifest();</p>

<p>public interface MakePlugin {</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/**
 * This plugin is called when Include-Resource detects
 * a reference to a resource that it can not find in the
 * file system.
 *
 * @param builder   The current builder
 * @param source    The source string (i.e. the place
 *                  where bnd looked)
 * @param arguments Any arguments on the clause in
 *                  Include-Resource
 * @return          A resource or null if no resource
 *                  could be made
 * @throws Exception
 */
Resource make(Builder builder, String source,
      Map&lt;String,String&gt; arguments) throws Exception;   }
</code></pre></div></div>

<p>[[#make]]
###Make
Make plugins kick in when the <code class="highlighter-rouge">Include-Resource</code> header tries to locate a resource but it cannot find that resource. The <code class="highlighter-rouge">-make</code> option defines a number of patterns that are mapped to a make instruction.</p>

<p>For example, if you have</p>

<p>Include-Resource:       com.acme.Abc.ann</p>

<p>If no such resource is found, bnd will look in the -make instruction. This instruction associates a pattern with a plugin type. For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   -make:                  (*.jar); type=xyz; abc=3; def="$1"
</code></pre></div></div>

<p>The first name part of the clause is matched against the unfound resource. All plugins are called sequentially until one returns non-null. The arguments on the -make clause are given as parameters to the make plugin. Normally all Make Plugins should verify the type field.</p>

<p>bnd has a bnd and a copy Make Plugin.</p>

<p>###Buildin Plugins
Some plugins are provided by bnd itself.</p>

<table>
  <tbody>
    <tr>
      <td> </td>
      <td>aQute.lib.spring.SpringComponent</td>
      <td> </td>
      <td>AnalyzerPlugin</td>
      <td> </td>
      <td>This component will analyze the Spring XML for Spring DM and will add any classes in these files to the referred set of classes.</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>aQute.bnd.make.MakeBnd</td>
      <td> </td>
      <td>MakePlugin</td>
      <td> </td>
      <td>If Include-Resource can’t find a referred resource it will use the make plugins to see if any of them can make the requested resource. The MakeBnd has type=bnd. This plugin can recursively call bnd to create embedded jars that are not created sequentially</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>aQute.bnd.make.MakeCopy</td>
      <td> </td>
      <td>MakePlugin</td>
      <td> </td>
      <td>Copies resources from other places in the file system</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>aQute.lib.deployer.FileRepo</td>
      <td> </td>
      <td>RepositoryPlugin</td>
      <td> </td>
      <td>Provides a file based repository.</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>aQute.bnd.maven.MavenRepository</td>
      <td> </td>
      <td>RepositoryPlugin</td>
      <td> </td>
      <td>Provides an interface to a the default maven repository in the user’s home directory. Can be used with aQute.bnd.maven.MavenGroup to support converting bundle symbolic names to group and artifact id.</td>
      <td> </td>
    </tr>
  </tbody>
</table>

			</div>
	</ul>


<nav class=next-prev>
	<a href='/releases/3.5.0/chapters/400-commandline.html'></a> <a href='/releases/3.5.0/chapters/610-plugin.html'></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=3>
			<ul>
				<li><a href="/releases/3.5.0/contact.html">Contact</a>
			</ul>
		<li span=3>
			<ul>
				<li><a href="/releases/3.5.0/">Developers</a>
			</ul>
		<li span=3>
			<ul>
				<li><a href="/releases/3.5.0/">More</a>
			</ul>
	</ul>
</footer>

</body>
</html>
