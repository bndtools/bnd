/*
 *
 */

import aQute.bnd.gradle.Resolve

plugins {
	id 'biz.aQute.bnd.builder'
}

repositories {
	mavenCentral()
}

configurations {
	bundles
}

dependencies {
	bundles 'org.apache.felix:org.apache.felix.framework:6.0.5'
	bundles 'org.apache.felix:org.apache.felix.eventadmin:1.4.6'
}

ext {
	osgiIdentity = 'org.apache.felix.eventadmin'
}

tasks.register('create', Resolve) {
	description = "Resolve ${name}.bndrun"
	bndrun = file("${name}.bndrun")
	outputBndrun = file("${buildDir}/${name}.bndrun")
	bundles = configurations.bundles
}

tasks.register('same', Resolve) {
	description = "Resolve ${name}.bndrun"
	bndrun = file("${name}.bndrun")
	failOnChanges = true
	bundles = configurations.bundles
	properties = ["project.osgiIdentity": osgiIdentity]
}

tasks.register('changefail', Resolve) {
	description = "Resolve ${name}.bndrun"
	bndrun = file("${name}.bndrun")
	failOnChanges = true
	bundles = configurations.bundles
}

tasks.register('resolvefail', Resolve) {
	description = "Resolve ${name}.bndrun"
	bndrun = file("${name}.bndrun")
	bundles = configurations.bundles
}
